{"remainingRequest":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/src/components/Force.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/src/components/Force.vue","mtime":1615732561652},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKaW1wb3J0ICogYXMgdG9wb2pzb24gZnJvbSAidG9wb2pzb24iCmltcG9ydCBCdXMgZnJvbSAnLi4vYXNzZXRzL2J1cy5qcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFwcCIsCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICBkYXRhOnVuZGVmaW5lZCwKICAgICAgcGxhY2U6W10sCiAgICAgIGFsbF9wbGFjZXM6e30sCiAgICAgIHN2ZzI6dW5kZWZpbmVkLAogICAgICB3aWR0aDIgOnVuZGVmaW5lZCwKICAgICAgaGVpZ2h0MiA6IHVuZGVmaW5lZCwKICAgICAgSGlzdF9zZWxlY3RfZGF0YTonJywKICAgICAgbm9kZUVsZW1lbnRzOnVuZGVmaW5lZAogICAgfQogIH0sCiAgLy9jcmVhdGVkKCl7CiAgICAvL0J1cy4kb24oIk1hcF9wbGFjZSIsICh2YWwpID0+IHsKICAgICAgICAgICAgICAgIC8vdGhpcy5wbGFjZSA9IHZhbDt9KSwKICAgIC8vQnVzLiRvbigiTWFwX3BsYWNlcyIsICh2YWwpID0+IHsKICAgICAgICAgICAgICAgIC8vdGhpcy5wbGFjZXMgPSB2YWw7fSl9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdlbmVyYXRlRm9yY2UoKQogICAgdGhpcy5oYW5kbGUoKQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlOiBmdW5jdGlvbiAoKSB7CiAgICBCdXMuJG9uKCJNYXBfc2VsZWN0X2RhdGEiLCAodmFsKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB2YWwKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRm9yY2UoKQogICAgICAgICAgICAgIH0pLAogICAgQnVzLiRvbigiSGlzdF9zZWxlY3RfZGF0YSIsICh2YWwpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuSGlzdF9zZWxlY3RfZGF0YSA9IHZhbAogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RfbmV3X3BvaW50KCkKICAgICAgICAgICAgICB9KQogIH0sCiAgICBnZW5lcmF0ZUZvcmNlKCkgewp2YXIgZGF0YV9wbGFjZSA9IFtdCnZhciB3aWR0aDIgPSA0MDAsCiAgICBoZWlnaHQyID0gMjg1Owp0aGlzLndpZHRoMiA9IHdpZHRoMgp0aGlzLmhlaWdodDIgPSBoZWlnaHQyCmNvbnN0IHN2ZzIgPSBkMy5zZWxlY3QoIiNmb3JjZSIpLmFwcGVuZCgic3ZnIikKCiAgc3ZnMi5hdHRyKCJ3aWR0aCIsIHdpZHRoMikKICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQyKTsKCi8vIGNlbnRlciBtYXJrZXIKc3ZnMi5hcHBlbmQoJ2NpcmNsZScpCiAgICAuYXR0cigncicsIDMpCiAgICAuYXR0cignY3gnLCB3aWR0aDIgLyAyKQogICAgLmF0dHIoJ2N5JywgaGVpZ2h0MiAvIDIpOwp0aGlzLnN2ZzIgPSBzdmcyCmxldCBzZWxmID0gdGhpcwpkMy5qc29uKCJzdXNoaV9tYXAuanNvbiIsIGZ1bmN0aW9uKGVycm9yLCBwb2ludCkgewogIGNvbnN0IHBsYWNlc19hbGwgPSB0b3BvanNvbi5mZWF0dXJlKHBvaW50LCBwb2ludC5vYmplY3RzLnBsYWNlcykKCnZhciBub2RlcyA9IFtdCnZhciBsaW5rcz1bXQogICAgZm9yKHZhciBpPTAsIGxlbj1kYXRhX3BsYWNlLmxlbmd0aDtpPGxlbjtpKyspewogICAgICAgIG5vZGVzLnB1c2goeyJuYW1lIjpkYXRhX3BsYWNlW2ldfSkKICAgICAgfQogICAgZm9yKGk9MSwgbGVuPXBsYWNlc19hbGwuZmVhdHVyZXMubGVuZ3RoLTE7IGk8bGVuOyBpKyspewogICAgLy8gKG5vdGU6IGxvb3AgdW50aWwgbGVuZ3RoIC0gMSBzaW5jZSB3ZSdyZSBnZXR0aW5nIHRoZSBuZXh0CiAgICAvLyAgaXRlbSB3aXRoIGkrMSkKICAgIHZhciBwbGFjZTEgPSBwbGFjZXNfYWxsLmZlYXR1cmVzW2ldLnByb3BlcnRpZXMubmFtZS50b1N0cmluZygpCiAgICB2YXIgcGxhY2UyID0gcGxhY2VzX2FsbC5mZWF0dXJlc1tpKzFdLnByb3BlcnRpZXMubmFtZS50b1N0cmluZygpCiAgICAvLyBpZiAoKHBsYWNlMSBpbiBkYXRhKSYmKHBsYWNlMiBpbiBkYXRhKSl7CiAgICB2YXIgYSA9IGNoZWNrX2luKGRhdGFfcGxhY2UsIHBsYWNlMSkKICAgIHZhciBiID0gY2hlY2tfaW4oZGF0YV9wbGFjZSwgcGxhY2UyKQogICAgaWYoKGE9PSJUUlVFIikgJiYgKGI9PSJUUlVFIikpewogICAgICB2YXIgaW5kZXgxID0gZGF0YV9wbGFjZS5maW5kSW5kZXgoY2hlY2tfZXF1YWwxKQogICAgICB2YXIgaW5kZXgyID0gZGF0YV9wbGFjZS5maW5kSW5kZXgoY2hlY2tfZXF1YWwyKQogICAgICBsaW5rcy5wdXNoKHsic291cmNlIjogaW5kZXgxLCAidGFyZ2V0IjogaW5kZXgyfSkKICAgIH0KfQpmdW5jdGlvbiBjaGVja19lcXVhbDEocGxhY2Upe3JldHVybiBwbGFjZS50b1N0cmluZygpPT1wbGFjZTF9CmZ1bmN0aW9uIGNoZWNrX2VxdWFsMihwbGFjZSl7cmV0dXJuIHBsYWNlLnRvU3RyaW5nKCk9PXBsYWNlMn0KZnVuY3Rpb24gY2hlY2tfaW4oZGF0YSwgcGxhY2UpewogIGZvcih2YXIgaT0wLCBsZW49cGxhY2VzX2FsbC5mZWF0dXJlcy5sZW5ndGgtMTsgaTxsZW47IGkrKyl7CiAgICB2YXIgZCA9IGRhdGFbaV0KICAgIGlmKGQ9PSBwbGFjZSl7CiAgICAgIHJldHVybiAnVFJVRScKICAgIH19CiAgcmV0dXJuICdGYWxzZScKfQp2YXIgbGlua0VsZW1lbnRzID0gc3ZnMi5zZWxlY3RBbGwoKQogICAgICAgIC5kYXRhKGxpbmtzKQogICAgICAgIC5lbnRlcigpCiAgICAgICAgLmFwcGVuZCgnbGluZScpCiAgICAgICAgLmF0dHIoJ3N0cm9rZScsICdibGFjaycpCiAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsICcycHgnKTsKc2VsZi5ub2RlRWxlbWVudHMgPSBzdmcyLnNlbGVjdEFsbCgpCiAgICAgICAgLmRhdGEobm9kZXMpCiAgICAgICAgLmVudGVyKCkKICAgICAgICAuYXBwZW5kKCdjaXJjbGUnKQogICAgICAgIC5hdHRyKCdyJywgNSkKICAgICAgICAuYXR0cignZmlsbCcsICdyZWQnKQoKdmFyIHRleHRFbGVtZW50cyA9IHN2ZzIuc2VsZWN0QWxsKCkKICAuZGF0YShub2RlcykKICAuZW50ZXIoKS5hcHBlbmQoJ3RleHQnKQogICAgLnRleHQobm9kZSA9PiBub2RlLm5hbWUpCiAgICAuYXR0cignZm9udC1zaXplJywgMTUpCiAgICAuYXR0cignZHgnLCAxNSkKICAgIC5hdHRyKCdkeScsIDQpCmNvbnN0IHNpbXVsYXRpb24gPSBkMy5mb3JjZVNpbXVsYXRpb24oKQogICAgICAgICAgLmZvcmNlKCdsaW5rJywgZDMuZm9yY2VMaW5rKCkuZGlzdGFuY2UoNjApKQogICAgICAgICAgLmZvcmNlKCdjaGFyZ2UnLCBkMy5mb3JjZU1hbnlCb2R5KCkpCiAgICAgICAgICAuZm9yY2UoJ2NlbnRlcicsIGQzLmZvcmNlQ2VudGVyKHdpZHRoMiAvIDIsIGhlaWdodDIgLyAyKSk7CgpzaW11bGF0aW9uCiAgICAubm9kZXMobm9kZXMpCiAgICAub24oJ3RpY2snLCAoKSA9PiB7CiAgbGlua0VsZW1lbnRzCiAgICAgICAgLmF0dHIoJ3gxJywgZCA9PiBkLnNvdXJjZS54KQogICAgICAgIC5hdHRyKCd5MScsIGQgPT4gZC5zb3VyY2UueSkKICAgICAgICAuYXR0cigneDInLCBkID0+IGQudGFyZ2V0LngpCiAgICAgICAgLmF0dHIoJ3kyJywgZCA9PiBkLnRhcmdldC55KQogIHNlbGYubm9kZUVsZW1lbnRzCiAgICAuYXR0cignY3gnLCBub2RlID0+IG5vZGUueCkKICAgIC5hdHRyKCdjeScsIG5vZGUgPT4gbm9kZS55KQogIHRleHRFbGVtZW50cwogICAgLmF0dHIoJ3gnLCBub2RlID0+IG5vZGUueCkKICAgIC5hdHRyKCd5Jywgbm9kZSA9PiBub2RlLnkpCn0pCgpzaW11bGF0aW9uCiAgICAuZm9yY2UoJ2xpbmsnKQogICAgLmxpbmtzKGxpbmtzKTsKLyoKZnVuY3Rpb24gZHJhZ3N0YXJ0ZWQoZCkgewogICAgaWYgKCFkMy5ldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMC4zKS5yZXN0YXJ0KCk7CiAgICBkLmZ4ID0gZC54OwogICAgZC5meSA9IGQueTsKfQoKZnVuY3Rpb24gZHJhZ2dlZChkKSB7CiAgICBkLmZ4ID0gZDMuZXZlbnQueDsKICAgIGQuZnkgPSBkMy5ldmVudC55Owp9CgpmdW5jdGlvbiBkcmFnZW5kZWQoZCkgewogICAgaWYgKCFkMy5ldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMCk7CiAgICBkLmZ4ID0gbnVsbDsKICAgIGQuZnkgPSBudWxsOwp9CiovCn0pfSwKdXBkYXRlRm9yY2UoKXsKICBsZXQgc2VsZiA9IHRoaXMKZnVuY3Rpb24gdW5pcXVlKGFycikgewogICAgcmV0dXJuIGFyci5maWx0ZXIoZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycikgewogICAgICAvLyDlj5blh7rlhYPntKAsIOivpeWFg+e0oOWcqOaVsOe7hOS4reesrOS4gOasoeWHuueOsOeahOe0ouW8lSA9PT0g5b2T5YmN57Si5byV5YC8CiAgICAgIHJldHVybiBhcnIuaW5kZXhPZihpdGVtLCAwKSA9PT0gaW5kZXg7CiAgICB9KTsKfQpmdW5jdGlvbiBjb3VudFRpbWVzKGRhdGEpIHsKICAgIHJldHVybiBkYXRhLnJlZHVjZShmdW5jdGlvbih0aW1lLCBuYW1lKSB7CiAgICAgICAgaWYgKG5hbWUgaW4gdGltZSkgewogICAgICAgICAgICB0aW1lW25hbWVdKys7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGltZVtuYW1lXSA9IDE7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aW1lOwogICAgfSwge30pOwp9Cgp2YXIgZGF0YV9zZWxlY3QgPSBbXQp2YXIgZGF0YV9zZWxlY3QxID0gW10KdmFyIHBsYWNlX2NvdW50ID0gW10KZm9yKHZhciBpPTAsIGxlbj10aGlzLmRhdGEubGVuZ3RoLTE7IGk8bGVuOyBpKyspewogIHZhciBkID0gdGhpcy5kYXRhW2ldCiAgZGF0YV9zZWxlY3QxLnB1c2goZC5wcm9wZXJ0aWVzLm5hbWUudG9TdHJpbmcoKSl9CiAgZGF0YV9zZWxlY3QgPSB1bmlxdWUoZGF0YV9zZWxlY3QxKQogIHBsYWNlX2NvdW50ID0gY291bnRUaW1lcyhkYXRhX3NlbGVjdDEpCnZhciBtYXhfY291bnQgPSAwCmZvcihpIGluIHBsYWNlX2NvdW50KXsKICB2YXIgaXRlbSA9IHBsYWNlX2NvdW50W2ldOwogIGlmIChpdGVtPm1heF9jb3VudCl7CiAgICBtYXhfY291bnQgPSBpdGVtCiAgfQp9CiAgdmFyIGhlaWdodDIgPSB0aGlzLmhlaWdodDIKICB2YXIgd2lkdGgyID0gdGhpcy53aWR0aDIKICB2YXIgc3ZnMiA9IHRoaXMuc3ZnMgpkMy5qc29uKCJzdXNoaV9tYXAuanNvbiIsIGZ1bmN0aW9uKGVycm9yLCBwb2ludCkgewogIGNvbnN0IHBsYWNlc19hbGwgPSB0b3BvanNvbi5mZWF0dXJlKHBvaW50LCBwb2ludC5vYmplY3RzLnBsYWNlcykKCiAgc3ZnMi5zZWxlY3RBbGwoIioiKS5yZW1vdmUoKTsKICBzdmcyLmFwcGVuZCgnY2lyY2xlJykKICAgIC5hdHRyKCdyJywgNSkKICAgIC5hdHRyKCdjeCcsIHdpZHRoMiAvIDIpCiAgICAuYXR0cignY3knLCBoZWlnaHQyIC8gMik7CnZhciBub2RlcyA9IFtdCnZhciBsaW5rcz1bXQogICAgZm9yKHZhciBpPTAsIGxlbj1kYXRhX3NlbGVjdC5sZW5ndGg7aTxsZW47aSsrKXsKICAgICAgICBub2Rlcy5wdXNoKHsibmFtZSI6ZGF0YV9zZWxlY3RbaV19KQogICAgICB9CiAgICBmb3IoaT0xLCBsZW49cGxhY2VzX2FsbC5mZWF0dXJlcy5sZW5ndGgtMTsgaTxsZW47IGkrKyl7CiAgICAvLyAobm90ZTogbG9vcCB1bnRpbCBsZW5ndGggLSAxIHNpbmNlIHdlJ3JlIGdldHRpbmcgdGhlIG5leHQKICAgIC8vICBpdGVtIHdpdGggaSsxKQogICAgdmFyIHBsYWNlMSA9IHBsYWNlc19hbGwuZmVhdHVyZXNbaV0ucHJvcGVydGllcy5uYW1lLnRvU3RyaW5nKCkKICAgIHZhciBwbGFjZTIgPSBwbGFjZXNfYWxsLmZlYXR1cmVzW2krMV0ucHJvcGVydGllcy5uYW1lLnRvU3RyaW5nKCkKICAgIC8vIGlmICgocGxhY2UxIGluIGRhdGEpJiYocGxhY2UyIGluIGRhdGEpKXsKICAgIHZhciBhID0gY2hlY2tfaW4oZGF0YV9zZWxlY3QsIHBsYWNlMSkKICAgIHZhciBiID0gY2hlY2tfaW4oZGF0YV9zZWxlY3QsIHBsYWNlMikKICAgIGlmKChhPT0iVFJVRSIpICYmIChiPT0iVFJVRSIpKXsKICAgICAgdmFyIGluZGV4MSA9IGRhdGFfc2VsZWN0LmZpbmRJbmRleChjaGVja19lcXVhbDEpCiAgICAgIHZhciBpbmRleDIgPSBkYXRhX3NlbGVjdC5maW5kSW5kZXgoY2hlY2tfZXF1YWwyKQogICAgICBsaW5rcy5wdXNoKHsic291cmNlIjogaW5kZXgxLCAidGFyZ2V0IjogaW5kZXgyfSkKICAgIH19CmZ1bmN0aW9uIGNoZWNrX2luKGRhdGEsIHBsYWNlKXsKICBmb3IodmFyIGk9MCwgbGVuPXBsYWNlc19hbGwuZmVhdHVyZXMubGVuZ3RoLTE7IGk8bGVuOyBpKyspewogICAgdmFyIGQgPSBkYXRhW2ldCiAgICBpZihkPT0gcGxhY2UpewogICAgICByZXR1cm4gJ1RSVUUnCiAgICB9fQogIHJldHVybiAnRmFsc2UnCn0KdmFyIHZpc2l0ZWQgPSBbXQovL3ZhciBzZWxlY3RfcGxhY2VfZnJvbV9mb3JjZSA9IFtdCnZhciBsaW5rRWxlbWVudHMgPSBzdmcyLnNlbGVjdEFsbCgpCiAgICAgICAgLmRhdGEobGlua3MpCiAgICAgICAgLmVudGVyKCkKICAgICAgICAuYXBwZW5kKCdsaW5lJykKICAgICAgICAuYXR0cignc3Ryb2tlJywgJ2JsYWNrJykKICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgJzJweCcpOwpzZWxmLm5vZGVFbGVtZW50cyA9IHN2ZzIuc2VsZWN0QWxsKCkKICAgICAgICAuZGF0YShub2RlcykKICAgICAgICAuZW50ZXIoKQogICAgICAgIC5hcHBlbmQoJ2NpcmNsZScpCiAgICAgICAgLmF0dHIoJ3InLCBmdW5jdGlvbihub2RlKXtyZXR1cm4gOCoocGxhY2VfY291bnRbbm9kZS5uYW1lXSs0KS8oNSttYXhfY291bnQpfSkKICAgICAgICAuYXR0cignaWQnLCBmdW5jdGlvbihub2RlKXtyZXR1cm4gbm9kZS5uYW1lfSkKICAgICAgICAuYXR0cignZmlsbCcsICcjNjQ5NUVEJykKICAgICAgICAub24oJ21vdXNlb3ZlcicsZnVuY3Rpb24oKXt2YXIgdGhhdCA9IHRoaXMKICAgICAgICAgIGQzLnNlbGVjdCh0aGF0KS5hdHRyKCJmaWxsIiwnb3JhbmdlJykKICAgICAgICAgIHNlbGYuR0xPQkFMLk5ld190aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkvMTAwMAogICAgICAgICAgaWYoKHNlbGYuR0xPQkFMLk5ld190aW1lLXNlbGYuR0xPQkFMLk9sZF90aW1lKT4xKXsKICAgICAgICAgIHZpc2l0ZWQucHVzaCh0aGF0KQogICAgICAgICAgc2VsZi5HTE9CQUwuVmlzdWFsX3N0YXRlWydGb3JjZSddWyd2aXNpdGVkJ10gPSB2aXNpdGVkCiAgICAgICAgICBCdXMuJGVtaXQoImNoYW5nZSIsIHNlbGYuR0xPQkFMLlZpc3VhbF9zdGF0ZSkKICAgICAgICAgIHNlbGYuR0xPQkFMLkxvZ19maWxlLnB1c2goWyd0aW1lc3RhbXAnLHNlbGYuR0xPQkFMLk5ld190aW1lLCdob3Zlci1mb3JjZS1wb3NpdGlvbicsZDMubW91c2UodGhpcyksdGhhdC5pZCwnXG4nXSkKICAgICAgICAgIHNlbGYucG9zdEludGVyYWN0aW9uKHsnbmFtZSc6c2VsZi5HTE9CQUwuTG9nX2ZpbGV9KQogICAgICAgICAgc2VsZi5HTE9CQUwuT2xkX3RpbWUgPSBzZWxmLkdMT0JBTC5OZXdfdGltZX0KICAgICAgICAgIEJ1cy4kZW1pdCgiRm9yY2Vfc2VsZWN0X2RhdGEiLCB0aGF0LmlkKX0pCiAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKCl7cmV0dXJuIHNlbGYubm9kZUVsZW1lbnRzLmF0dHIoJ2ZpbGwnLCAnIzY0OTVFRCcpfSkKCgp2YXIgdGV4dEVsZW1lbnRzID0gc3ZnMi5zZWxlY3RBbGwoKQogIC5kYXRhKG5vZGVzKQogIC5lbnRlcigpLmFwcGVuZCgndGV4dCcpCiAgICAudGV4dChub2RlID0+IG5vZGUubmFtZSkKICAgIC5hdHRyKCdmb250LXNpemUnLCAxMCkKICAgIC5hdHRyKCdkeCcsIDgpCiAgICAuYXR0cignZHknLCA0KQoKY29uc3Qgc2ltdWxhdGlvbiA9IGQzLmZvcmNlU2ltdWxhdGlvbigpCiAgICAgICAgICAuZm9yY2UoJ2xpbmsnLCBkMy5mb3JjZUxpbmsoKS5kaXN0YW5jZSgyNSkpCiAgICAgICAgICAuZm9yY2UoJ2NoYXJnZScsIGQzLmZvcmNlTWFueUJvZHkoLTEwMCkpCiAgICAgICAgICAuZm9yY2UoJ2NlbnRlcicsIGQzLmZvcmNlQ2VudGVyKHdpZHRoMiAvIDIsIGhlaWdodDIgLyAyKSk7CgpzaW11bGF0aW9uCiAgICAubm9kZXMobm9kZXMpCiAgICAub24oJ3RpY2snLCAoKSA9PiB7CiAgbGlua0VsZW1lbnRzCiAgICAgICAgLmF0dHIoJ3gxJywgZCA9PiBkLnNvdXJjZS54KQogICAgICAgIC5hdHRyKCd5MScsIGQgPT4gZC5zb3VyY2UueSkKICAgICAgICAuYXR0cigneDInLCBkID0+IGQudGFyZ2V0LngpCiAgICAgICAgLmF0dHIoJ3kyJywgZCA9PiBkLnRhcmdldC55KQogIHNlbGYubm9kZUVsZW1lbnRzCiAgICAuYXR0cignY3gnLCBmdW5jdGlvbihkKXtyZXR1cm4gZC54ID0gTWF0aC5tYXgoNSxNYXRoLm1pbihzZWxmLndpZHRoMi00LGQueCkpfSkKICAgIC5hdHRyKCdjeScsIGZ1bmN0aW9uKGQpe3JldHVybiBkLnkgPSBNYXRoLm1heCg1LE1hdGgubWluKHNlbGYuaGVpZ2h0Mi00LGQueSkpfSkKICB0ZXh0RWxlbWVudHMKICAgIC5hdHRyKCd4Jywgbm9kZSA9PiBub2RlLngpCiAgICAuYXR0cigneScsIG5vZGUgPT4gbm9kZS55KQp9KQogICAgLm9uKCdlbmQnLCgpID0+IHsKICAgICAgdmlzaXRlZCA9IFtdCiAgICAgIHZhciBzZSA9IFtdCmZvciAoaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgdmFyIGQgPW5vZGVzW2ldCiAgc2UucHVzaCh7J2Nvb3JkaW5hdGVzJzpbZC54LGQueV0sJ3InOjgqKHBsYWNlX2NvdW50W2QubmFtZV0rNCkvKDUrbWF4X2NvdW50KSwnbmFtZSc6ZC5uYW1lfSkKfQpzZWxmLkdMT0JBTC5Gb3JjZV9zdGF0ZS5wdXNoKHsnRm9yY2UnOnNlfSkKc2VsZi5HTE9CQUwuVmlzdWFsX3N0YXRlWydGb3JjZSddWydvdmVyYWxsJ10gPSBzZQpzZWxmLkdMT0JBTC5WaXN1YWxfc3RhdGVbJ0ZvcmNlJ11bJ3Zpc2l0J10gPSBbXQpCdXMuJGVtaXQoImNoYW5nZSIsIHNlbGYuR0xPQkFMLlZpc3VhbF9zdGF0ZSkKICAgIH0pCgpzaW11bGF0aW9uCiAgICAuZm9yY2UoJ2xpbmsnKQogICAgLmxpbmtzKGxpbmtzKTsKCgovKgpjb25zb2xlLmxvZyhub2Rlc1sxXSkKY29uc29sZS5sb2coc2VsZi5ub2RlRWxlbWVudHMpCnZhciBzZSA9IFtdCmZvciAoaSA9IDAsIGxlbiA9IHNlbGYubm9kZUVsZW1lbnRzLl9ncm91cHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICB2YXIgZCA9c2VsZi5ub2RlRWxlbWVudHMuX2dyb3Vwc1swXVtpXS5fX2RhdGFfXwogIGNvbnNvbGUubG9nKGksZCxkLngsZC5pZCkKICBzZS5wdXNoKHsnY29vcmRpbmF0ZXMnOltkLngsZC55XSwncic6OCoocGxhY2VfY291bnRbZC5uYW1lXSs0KS8oNSttYXhfY291bnQpLCduYW1lJzpkLm5hbWV9KQp9CnNlbGYuR0xPQkFMLlZpc3VhbF9zdGF0ZS5wdXNoKHsnRm9yY2UnOnNlfSkKY29uc29sZS5sb2coc2VsZi5HTE9CQUwuVmlzdWFsX3N0YXRlKQoKZnVuY3Rpb24gZHJhZ3N0YXJ0ZWQoZCkgewogICAgaWYgKCFkMy5ldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMC4zKS5yZXN0YXJ0KCk7CiAgICBkLmZ4ID0gZC54OwogICAgZC5meSA9IGQueTsKfQoKZnVuY3Rpb24gZHJhZ2dlZChkKSB7CiAgICBkLmZ4ID0gZDMuZXZlbnQueDsKICAgIGQuZnkgPSBkMy5ldmVudC55Owp9CgpmdW5jdGlvbiBkcmFnZW5kZWQoZCkgewogICAgaWYgKCFkMy5ldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMCk7CiAgICBkLmZ4ID0gbnVsbDsKICAgIGQuZnkgPSBudWxsOwp9CiovCmZ1bmN0aW9uIGNoZWNrX2VxdWFsMShwbGFjZSl7cmV0dXJuIHBsYWNlLnRvU3RyaW5nKCk9PXBsYWNlMX0KZnVuY3Rpb24gY2hlY2tfZXF1YWwyKHBsYWNlKXtyZXR1cm4gcGxhY2UudG9TdHJpbmcoKT09cGxhY2UyfX0pCn0sCnNlbGVjdF9uZXdfcG9pbnQoKXsKICB2YXIgZGF0YSA9IHRoaXMuSGlzdF9zZWxlY3RfZGF0YQogIHRoaXMubm9kZUVsZW1lbnRzLmF0dHIoJ2ZpbGwnLGZ1bmN0aW9uKGQpe3JldHVybiBpc1NlbGVjdGVkQnlIaXN0KGQsZGF0YSkKZnVuY3Rpb24gaXNTZWxlY3RlZEJ5SGlzdChhLGRhdGEpewogIGZvcih2YXIgaT0wLGxlbj1kYXRhLmxlbmd0aDtpPGxlbjtpKyspewogICAgdmFyIHBsYWNlID0gZGF0YVtpXS5wcm9wZXJ0aWVzLm5hbWUKICAgICAgaWYoYS5uYW1lPT1wbGFjZSl7CiAgICAgICAgcmV0dXJuICdvcmFuZ2UnfQogICAgfQogICAgcmV0dXJuICIjNjQ5NUVEIgogIH0KfSkKCn0KfX0K"},{"version":3,"sources":["Force.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Force.vue","sourceRoot":"src/components","sourcesContent":["/* eslint-disable */s\n<template>\n  <div id=\"force\">\n    <p>\n      <h4>  Places connection</h4>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\"\nimport Bus from '../assets/bus.js';\n\nexport default {\n  name: \"App\",\n  data(){\n    return{\n      data:undefined,\n      place:[],\n      all_places:{},\n      svg2:undefined,\n      width2 :undefined,\n      height2 : undefined,\n      Hist_select_data:'',\n      nodeElements:undefined\n    }\n  },\n  //created(){\n    //Bus.$on(\"Map_place\", (val) => {\n                //this.place = val;}),\n    //Bus.$on(\"Map_places\", (val) => {\n                //this.places = val;})},\n  mounted() {\n    this.generateForce()\n    this.handle()\n  },\n  methods: {\n    handle: function () {\n    Bus.$on(\"Map_select_data\", (val) => {\n                this.data = val\n                this.updateForce()\n              }),\n    Bus.$on(\"Hist_select_data\", (val) => {\n                this.Hist_select_data = val\n                this.select_new_point()\n              })\n  },\n    generateForce() {\nvar data_place = []\nvar width2 = 400,\n    height2 = 285;\nthis.width2 = width2\nthis.height2 = height2\nconst svg2 = d3.select(\"#force\").append(\"svg\")\n\n  svg2.attr(\"width\", width2)\n    .attr(\"height\", height2);\n\n// center marker\nsvg2.append('circle')\n    .attr('r', 3)\n    .attr('cx', width2 / 2)\n    .attr('cy', height2 / 2);\nthis.svg2 = svg2\nlet self = this\nd3.json(\"sushi_map.json\", function(error, point) {\n  const places_all = topojson.feature(point, point.objects.places)\n\nvar nodes = []\nvar links=[]\n    for(var i=0, len=data_place.length;i<len;i++){\n        nodes.push({\"name\":data_place[i]})\n      }\n    for(i=1, len=places_all.features.length-1; i<len; i++){\n    // (note: loop until length - 1 since we're getting the next\n    //  item with i+1)\n    var place1 = places_all.features[i].properties.name.toString()\n    var place2 = places_all.features[i+1].properties.name.toString()\n    // if ((place1 in data)&&(place2 in data)){\n    var a = check_in(data_place, place1)\n    var b = check_in(data_place, place2)\n    if((a==\"TRUE\") && (b==\"TRUE\")){\n      var index1 = data_place.findIndex(check_equal1)\n      var index2 = data_place.findIndex(check_equal2)\n      links.push({\"source\": index1, \"target\": index2})\n    }\n}\nfunction check_equal1(place){return place.toString()==place1}\nfunction check_equal2(place){return place.toString()==place2}\nfunction check_in(data, place){\n  for(var i=0, len=places_all.features.length-1; i<len; i++){\n    var d = data[i]\n    if(d== place){\n      return 'TRUE'\n    }}\n  return 'False'\n}\nvar linkElements = svg2.selectAll()\n        .data(links)\n        .enter()\n        .append('line')\n        .attr('stroke', 'black')\n        .attr('stroke-width', '2px');\nself.nodeElements = svg2.selectAll()\n        .data(nodes)\n        .enter()\n        .append('circle')\n        .attr('r', 5)\n        .attr('fill', 'red')\n\nvar textElements = svg2.selectAll()\n  .data(nodes)\n  .enter().append('text')\n    .text(node => node.name)\n    .attr('font-size', 15)\n    .attr('dx', 15)\n    .attr('dy', 4)\nconst simulation = d3.forceSimulation()\n          .force('link', d3.forceLink().distance(60))\n          .force('charge', d3.forceManyBody())\n          .force('center', d3.forceCenter(width2 / 2, height2 / 2));\n\nsimulation\n    .nodes(nodes)\n    .on('tick', () => {\n  linkElements\n        .attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y)\n  self.nodeElements\n    .attr('cx', node => node.x)\n    .attr('cy', node => node.y)\n  textElements\n    .attr('x', node => node.x)\n    .attr('y', node => node.y)\n})\n\nsimulation\n    .force('link')\n    .links(links);\n/*\nfunction dragstarted(d) {\n    if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n}\n\nfunction dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n}\n\nfunction dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n}\n*/\n})},\nupdateForce(){\n  let self = this\nfunction unique(arr) {\n    return arr.filter(function(item, index, arr) {\n      // 取出元素, 该元素在数组中第一次出现的索引 === 当前索引值\n      return arr.indexOf(item, 0) === index;\n    });\n}\nfunction countTimes(data) {\n    return data.reduce(function(time, name) {\n        if (name in time) {\n            time[name]++;\n        } else {\n            time[name] = 1;\n        }\n        return time;\n    }, {});\n}\n\nvar data_select = []\nvar data_select1 = []\nvar place_count = []\nfor(var i=0, len=this.data.length-1; i<len; i++){\n  var d = this.data[i]\n  data_select1.push(d.properties.name.toString())}\n  data_select = unique(data_select1)\n  place_count = countTimes(data_select1)\nvar max_count = 0\nfor(i in place_count){\n  var item = place_count[i];\n  if (item>max_count){\n    max_count = item\n  }\n}\n  var height2 = this.height2\n  var width2 = this.width2\n  var svg2 = this.svg2\nd3.json(\"sushi_map.json\", function(error, point) {\n  const places_all = topojson.feature(point, point.objects.places)\n\n  svg2.selectAll(\"*\").remove();\n  svg2.append('circle')\n    .attr('r', 5)\n    .attr('cx', width2 / 2)\n    .attr('cy', height2 / 2);\nvar nodes = []\nvar links=[]\n    for(var i=0, len=data_select.length;i<len;i++){\n        nodes.push({\"name\":data_select[i]})\n      }\n    for(i=1, len=places_all.features.length-1; i<len; i++){\n    // (note: loop until length - 1 since we're getting the next\n    //  item with i+1)\n    var place1 = places_all.features[i].properties.name.toString()\n    var place2 = places_all.features[i+1].properties.name.toString()\n    // if ((place1 in data)&&(place2 in data)){\n    var a = check_in(data_select, place1)\n    var b = check_in(data_select, place2)\n    if((a==\"TRUE\") && (b==\"TRUE\")){\n      var index1 = data_select.findIndex(check_equal1)\n      var index2 = data_select.findIndex(check_equal2)\n      links.push({\"source\": index1, \"target\": index2})\n    }}\nfunction check_in(data, place){\n  for(var i=0, len=places_all.features.length-1; i<len; i++){\n    var d = data[i]\n    if(d== place){\n      return 'TRUE'\n    }}\n  return 'False'\n}\nvar visited = []\n//var select_place_from_force = []\nvar linkElements = svg2.selectAll()\n        .data(links)\n        .enter()\n        .append('line')\n        .attr('stroke', 'black')\n        .attr('stroke-width', '2px');\nself.nodeElements = svg2.selectAll()\n        .data(nodes)\n        .enter()\n        .append('circle')\n        .attr('r', function(node){return 8*(place_count[node.name]+4)/(5+max_count)})\n        .attr('id', function(node){return node.name})\n        .attr('fill', '#6495ED')\n        .on('mouseover',function(){var that = this\n          d3.select(that).attr(\"fill\",'orange')\n          self.GLOBAL.New_time = new Date().getTime()/1000\n          if((self.GLOBAL.New_time-self.GLOBAL.Old_time)>1){\n          visited.push(that)\n          self.GLOBAL.Visual_state['Force']['visited'] = visited\n          Bus.$emit(\"change\", self.GLOBAL.Visual_state)\n          self.GLOBAL.Log_file.push(['timestamp',self.GLOBAL.New_time,'hover-force-position',d3.mouse(this),that.id,'\\n'])\n          self.postInteraction({'name':self.GLOBAL.Log_file})\n          self.GLOBAL.Old_time = self.GLOBAL.New_time}\n          Bus.$emit(\"Force_select_data\", that.id)})\n        .on('mouseout', function(){return self.nodeElements.attr('fill', '#6495ED')})\n\n\nvar textElements = svg2.selectAll()\n  .data(nodes)\n  .enter().append('text')\n    .text(node => node.name)\n    .attr('font-size', 10)\n    .attr('dx', 8)\n    .attr('dy', 4)\n\nconst simulation = d3.forceSimulation()\n          .force('link', d3.forceLink().distance(25))\n          .force('charge', d3.forceManyBody(-100))\n          .force('center', d3.forceCenter(width2 / 2, height2 / 2));\n\nsimulation\n    .nodes(nodes)\n    .on('tick', () => {\n  linkElements\n        .attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y)\n  self.nodeElements\n    .attr('cx', function(d){return d.x = Math.max(5,Math.min(self.width2-4,d.x))})\n    .attr('cy', function(d){return d.y = Math.max(5,Math.min(self.height2-4,d.y))})\n  textElements\n    .attr('x', node => node.x)\n    .attr('y', node => node.y)\n})\n    .on('end',() => {\n      visited = []\n      var se = []\nfor (i = 0, len = nodes.length; i < len; i++) {\n  var d =nodes[i]\n  se.push({'coordinates':[d.x,d.y],'r':8*(place_count[d.name]+4)/(5+max_count),'name':d.name})\n}\nself.GLOBAL.Force_state.push({'Force':se})\nself.GLOBAL.Visual_state['Force']['overall'] = se\nself.GLOBAL.Visual_state['Force']['visit'] = []\nBus.$emit(\"change\", self.GLOBAL.Visual_state)\n    })\n\nsimulation\n    .force('link')\n    .links(links);\n\n\n/*\nconsole.log(nodes[1])\nconsole.log(self.nodeElements)\nvar se = []\nfor (i = 0, len = self.nodeElements._groups.length; i < len; i++) {\n  var d =self.nodeElements._groups[0][i].__data__\n  console.log(i,d,d.x,d.id)\n  se.push({'coordinates':[d.x,d.y],'r':8*(place_count[d.name]+4)/(5+max_count),'name':d.name})\n}\nself.GLOBAL.Visual_state.push({'Force':se})\nconsole.log(self.GLOBAL.Visual_state)\n\nfunction dragstarted(d) {\n    if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n}\n\nfunction dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n}\n\nfunction dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n}\n*/\nfunction check_equal1(place){return place.toString()==place1}\nfunction check_equal2(place){return place.toString()==place2}})\n},\nselect_new_point(){\n  var data = this.Hist_select_data\n  this.nodeElements.attr('fill',function(d){return isSelectedByHist(d,data)\nfunction isSelectedByHist(a,data){\n  for(var i=0,len=data.length;i<len;i++){\n    var place = data[i].properties.name\n      if(a.name==place){\n        return 'orange'}\n    }\n    return \"#6495ED\"\n  }\n})\n\n}\n}}\n</script>\n\n<style>\n\n.selected{\n  fill: yellow;\n}"]}]}