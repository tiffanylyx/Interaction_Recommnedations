{"remainingRequest":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/src/components/Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/src/components/Map.vue","mtime":1614737264724},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKaW1wb3J0ICogYXMgdG9wb2pzb24gZnJvbSAidG9wb2pzb24iCi8vaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgQnVzIGZyb20gJy4uL2Fzc2V0cy9idXMuanMnOwovL3ZhciBtc2dDZW50ZXIgPSBuZXcgVnVlKCkKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBcHAiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWxlY3RfZGF0YTonJywKICAgICAgSGlzdF9zZWxlY3RfZGF0YTonJywKICAgICAgRm9yY2Vfc2VsZWN0X2RhdGE6JycsCiAgICAgIG15Q2lyY2xlOicnLAogICAgICBteUxpbms6JycsCiAgICAgIHN2ZzonJwogICAgfTsKICB9LAogIC8vY3JlYXRlZCgpIHsKICAgIC8vIOWcqOmcgOimgeeahOS8oOmAkuaVsOaNrueahOaXtuWAmeiwg+eUqHNlbmREYXRh5pa55rOV77yM6L+Z6YeM5qih5ouf6LCD55SoCiAgICAvL3RoaXMuc2VuZERhdGEoKTsKICAvL30sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2VuZXJhdGVBcmMoKTsKICAgIHRoaXMuaGFuZGxlKCkKICAgIC8vdGhpcy5zZW5kRGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlOiBmdW5jdGlvbiAoKSB7CiAgICBCdXMuJGVtaXQoIk1hcF9hZ2UiLCB0aGlzLnNlbGVjdF92YWx1ZSksCiAgICBCdXMuJG9uKCJIaXN0X3NlbGVjdF9kYXRhIiwgKHZhbCkgPT4gewogICAgICB0aGlzLkhpc3Rfc2VsZWN0X2RhdGE9dmFsOwogICAgICB0aGlzLnNlbGVjdF9uZXdfcG9pbnQoKX0pLAogICAgQnVzLiRvbigiRm9yY2Vfc2VsZWN0X2RhdGEiLCAodmFsKSA9PiB7CiAgICAgIHRoaXMuRm9yY2Vfc2VsZWN0X2RhdGE9dmFsOwogICAgICB0aGlzLnNlbGVjdF9uZXdfcG9pbnRfRm9yY2UoKX0pfSwKICAgIGdlbmVyYXRlQXJjKCkgewogICAgICBjb25zdCB3aWR0aCA9IDYwMDsKICAgICAgY29uc3QgaGVpZ2h0ID0gNjAwOwoKICAgICAgY29uc3QgcHJvamVjdGlvbiA9IGQzLmdlb0FsYmVycygpCiAgICAgICAgICAuY2VudGVyKFswLCAzMF0pCiAgICAgICAgICAucm90YXRlKFstMTEwLCAwXSkKICAgICAgICAgIC5wYXJhbGxlbHMoWzIwLCA2MF0pCiAgICAgICAgICAudHJhbnNsYXRlKFt3aWR0aCAvIDIsIGhlaWdodCAvIDJdKQogICAgICAgICAgLnNjYWxlKDEzNzApCgoKICAgICAgY29uc3QgcGF0aCA9IGQzLmdlb1BhdGgoKQogICAgICAgICAgLnByb2plY3Rpb24ocHJvamVjdGlvbikKICAgICAgICAgIC5wb2ludFJhZGl1cygyKTsKICAgICAgY29uc3Qgc3ZnID0gZDMKICAgICAgICAuc2VsZWN0KCIjbWFwIikKICAgICAgICAuYXBwZW5kKCJzdmciKQogICAgICAgIC5hdHRyKCJ3aWR0aCIsIHdpZHRoKQogICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOwogICAgICBsZXQgc2VsZiA9IHRoaXMKICAgICAgZDMuanNvbigic3VzaGlfbWFwLmpzb24iLCBmdW5jdGlvbihlcnJvciwgcG9pbnQpIHsKICAgICAgdmFyIHN1YnVuaXRzID0gdG9wb2pzb24uZmVhdHVyZShwb2ludCwgcG9pbnQub2JqZWN0cy5jaGluYSksCiAgICAgIHBsYWNlcyA9IHRvcG9qc29uLmZlYXR1cmUocG9pbnQsIHBvaW50Lm9iamVjdHMucGxhY2VzKTsKICB2YXIgem9vbSA9IGQzLnpvb20oKQogICAgICAuc2NhbGVFeHRlbnQoWzAuNSwzXSkvL+eUqOS6juiuvue9ruacgOWwj+WSjOacgOWkp+eahOe8qeaUvuavlOS+iwogICAgICAub24oInpvb20iLHpvb21lZCkgCgogIC8vc3ZnLmNhbGwoem9vbSk7IC8v6LCD55So57yp5pS+5ouW5ou95Yqf6IO9CnNlbGYuR0xPQkFMLkxvZ19maWxlLnB1c2goWydTdGFydF90aW1lc3RhbXAnLG5ldyBEYXRlKCkuZ2V0VGltZSgpLzEwMDAsJ1xuJ10pCi8v57yW5YaZIOW5s+enu+WHveaVsApmdW5jdGlvbiByZXNldCgpIHsKICAgIAogICAgICBzdmcudHJhbnNpdGlvbigpLmR1cmF0aW9uKDc1MCkuY2FsbCggLy9kdXJhdGlvbui/h+a4oeaXtumXtAogICAgICAgIHpvb20udHJhbnNmb3JtLAogICAgICAgIGQzLnpvb21JZGVudGl0eSwgLy/mjqfliLbnvKnmlL7kuK3lv4PnmoTkuLrpvKDmoIflvZPliY3kvY3nva4KICAgICAgICBkMy56b29tVHJhbnNmb3JtKHN2Zy5ub2RlKCkpLmludmVydChbd2lkdGggLyAyLCBoZWlnaHQgLyAyXSkgLy/lvLnmgKfliqjnlLvnmoTlnIblv4PkvY3nva4KICAgICAgKTsKfQovLyDnvKnmlL7lh73mlbAKZnVuY3Rpb24gem9vbWVkKCkgewogICAgY29uc3QgdHJhbnNmb3JtID0gZDMuZXZlbnQudHJhbnNmb3JtOyAvL+ivhuWIq+m8oOagh+S6i+S7tgogICAgc2VsZi5HTE9CQUwuTG9nX2ZpbGUucHVzaChbJ3RpbWVzdGFtcCcsbmV3IERhdGUoKS5nZXRUaW1lKCkvMTAwMCwnWm9vbS1NYXAtVmFsdWUnLHRyYW5zZm9ybSwnXG4nXSkKICAgIGdyb3VwLmF0dHIoInRyYW5zZm9ybSIsIHRyYW5zZm9ybSk7IC8v5bCG57yp5pS+57uT5p6c5Lyg57uZZwogICAgdmFyIGsgPSBNYXRoLnNxcnQoMTAwIC8gcHJvamVjdGlvbi5zY2FsZSgpKTsgLy/kv67mlLnlnLDlm77lsLrlr7gKICAgIGdyb3VwLmF0dHIoInN0cm9rZS13aWR0aCIsIDEgLyBrKTsgLy/kv67mlLnlr7nlupTnmoTlsZ7mgKcKfQoKICAgIHZhciBncm91cCA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCJpZCIsImdyb3VwIikuZGF0dW0oewogICAgeDogMCwKICAgIHk6IDAKICB9KS5vbigiY2xpY2siLCByZXNldCk7ICAvL+WumuS5ieeCueWHu+S6i+S7tgogICAgICB2YXIgZzEgPSBncm91cC5hcHBlbmQoImciKS5hdHRyKCJpZCIsImZvcl9wYXRoIik7IC8v5paw5aKe57uE77yM55So5LqO5a2Y5YKo5LiN5ZCM5a+56LGhCiAgICAgIHZhciBnMiA9IGdyb3VwLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwiZm9yX2NpcmNsZSIpOwogICAgICB2YXIgZzMgPSBncm91cC5hcHBlbmQoImciKS5hdHRyKCJpZCIsImZvcl9saW5lIikuYXR0cigicG9pbnRlci1ldmVudHMiLCJub25lIik7CgoKICBnMS5zZWxlY3RBbGwoIi5zdWJ1bml0IikKICAgICAgLmRhdGEoc3VidW5pdHMuZmVhdHVyZXMpCiAgICAuZW50ZXIoKS5hcHBlbmQoInBhdGgiKQogICAgICAuYXR0cigiY2xhc3MiLCBmdW5jdGlvbihkKSB7IHJldHVybiAic3VidW5pdCAiICsgZC5pZDsgfSkKICAgICAgLmF0dHIoImQiLCBwYXRoKQogICAgICAuYXR0cignc3Ryb2tlJywnIzIyMicpCiAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCcxcHgnKQogICAgICAuYXR0cignZmlsbCcsJyNkZGQnKTsKCi8vIAp2YXIgbGluazFzID0gWwogIHt0eXBlOiAiTGluZVN0cmluZyIsIGFnZTowLGNvb3JkaW5hdGVzOiBbWzAsMF0sWzAsMF1dfQpdCiAgICBmb3IodmFyIGk9MCwgbGVuPXBsYWNlcy5mZWF0dXJlcy5sZW5ndGgtMTsgaTxsZW47IGkrKyl7CiAgICAvLyAobm90ZTogbG9vcCB1bnRpbCBsZW5ndGggLSAxIHNpbmNlIHdlJ3JlIGdldHRpbmcgdGhlIG5leHQKICAgIC8vICBpdGVtIHdpdGggaSsxKQogICAgICAgIGxpbmsxcy5wdXNoKHsKICAgICAgICAgICAgdHlwZTogIkxpbmVTdHJpbmciLAogICAgICAgICAgICBhZ2UgOiBwbGFjZXMuZmVhdHVyZXNbaV0ucHJvcGVydGllcy5hZ2UsCiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbCiAgICAgICAgICAgICAgICBbIHBsYWNlcy5mZWF0dXJlc1tpXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXSwgcGxhY2VzLmZlYXR1cmVzW2ldLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdXSwKICAgICAgICAgICAgICAgIFsgcGxhY2VzLmZlYXR1cmVzW2krMV0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0sIHBsYWNlcy5mZWF0dXJlc1tpKzFdLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdXV0KICAgICAgICB9KTsKICAgIH0KICAgIGczLmFwcGVuZCgnc3ZnOmRlZnMnKS5hcHBlbmQoJ3N2ZzptYXJrZXInKQogICAgICAgIC5hdHRyKCdpZCcsICdlbmQtYXJyb3cnKQogICAgICAgIC5hdHRyKCd2aWV3Qm94JywgJzAgLTUgOCA4JykKICAgICAgICAuYXR0cigncmVmWCcsIDgpCiAgICAgICAgLmF0dHIoJ21hcmtlcldpZHRoJywgMykvL+eureWktOWPguaVsOmAguW9k+aMiemcgOiwg+aVtAogICAgICAgIC5hdHRyKCdtYXJrZXJIZWlnaHQnLCAzKQogICAgICAgIC5hdHRyKCdvcmllbnQnLCAnYXV0bycpCiAgICAgICAgLmFwcGVuZCgnc3ZnOnBhdGgnKQogICAgICAgIC5hdHRyKCdkJywgJ00wLC01TDEwLDBMMCw1JykvL+e7mOWItueureWktOW9oueKtgogICAgICAgIC5hdHRyKCdmaWxsJywgJyM0ODNEOEInKTsKICAvLyDliqBsYWJlbAogIHNlbGYubXlDaXJjbGUgPSBnMi5zZWxlY3RBbGwoIi5wbGFjZS1wb2ludCIpCiAgICAgIC5kYXRhKHBsYWNlcy5mZWF0dXJlcykKICAgIC5lbnRlcigpCiAgICAuYXBwZW5kKCJjaXJjbGUiKQogICAgICAuYXR0cigiY2xhc3MiLCAicGxhY2UtcG9pbnQiKQogICAgICAuYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gInRyYW5zbGF0ZSgiICsgcHJvamVjdGlvbihkLmdlb21ldHJ5LmNvb3JkaW5hdGVzKSArICIpIjsgfSkKICAgICAgLmF0dHIoIngiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdID4gLTEgPyA2IDogLTY7IH0pCiAgICAgIC5hdHRyKCJkeSIsICIuMzVlbSIpCiAgICAgIC5hdHRyKCJyIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5wcm9wZXJ0aWVzLmFnZS8xMDsgfSkKICAgICAgLmF0dHIoImZpbGwiLCAiIzY0OTVFRCIpCiAgICAgIC5hdHRyKCJvcGFjaXR5IiwwLjcpCiAgc2VsZi5teUxpbmsgPSBnMy5zZWxlY3RBbGwoIm15UGF0aCIpCiAgICAgIC5kYXRhKGxpbmsxcykKICAgICAgLmVudGVyKCkKICAgICAgLmFwcGVuZCgicGF0aCIpCiAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbihkKXsgcmV0dXJuIHBhdGgoZCl9KQogICAgICAgIC5zdHlsZSgiZmlsbCIsICJub25lIikKICAgICAgICAuc3R5bGUoInN0cm9rZSIsICIjNDgzRDhCIikKICAgICAgICAuc3R5bGUoInN0cm9rZS13aWR0aCIsIDIpCiAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwwLjQpCiAgICAgICAgLmF0dHIoIm1hcmtlci1lbmQiLCAidXJsKCNlbmQtYXJyb3cpIikKICBzZWxmLnN2ZyA9IHN2ZwogIC8qCiAgc3ZnCiAgICAuY2FsbCggZDMuYnJ1c2goKSAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBicnVzaCBmZWF0dXJlIHVzaW5nIHRoZSBkMy5icnVzaCBmdW5jdGlvbgogICAgICAuZXh0ZW50KCBbIFswLDBdLCBbd2lkdGgsaGVpZ2h0XSBdICkgLy8gaW5pdGlhbGlzZSB0aGUgYnJ1c2ggYXJlYTogc3RhcnQgYXQgMCwwIGFuZCBmaW5pc2hlcyBhdCB3aWR0aCxoZWlnaHQ6IGl0IG1lYW5zIEkgc2VsZWN0IHRoZSB3aG9sZSBncmFwaCBhcmVhCiAgICAgIC5vbigiZW5kIiwgdXBkYXRhX2NoYXJ0KQogICAgKQogICAgKi8KdmFyIGFsbEdyb3VwID0gWydub25lJywic2VsZWN0IGFyZWEiLCAiem9vbSIsICJzaG93IHBvaW50IGluZm8iXQp2YXIgZHJvcGRvd25CdXR0b24gPSBkMy5zZWxlY3QoIiNtYXAiKQogIC5hcHBlbmQoJ3NlbGVjdCcpCiAgLm9uKCJjaGFuZ2UiLCBkcm9wY2hhbmdlKQoKLy8gYWRkIHRoZSBvcHRpb25zIHRvIHRoZSBidXR0b24KZHJvcGRvd25CdXR0b24gLy8gQWRkIGEgYnV0dG9uCiAgLnNlbGVjdEFsbCgnbXlPcHRpb25zJykgLy8gTmV4dCA0IGxpbmVzIGFkZCA2IG9wdGlvbnMgPSA2IGNvbG9ycwogIC5kYXRhKGFsbEdyb3VwKQogIC5lbnRlcigpCiAgLmFwcGVuZCgnb3B0aW9uJykKICAudGV4dChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZDsgfSkgLy8gdGV4dCBzaG93ZWQgaW4gdGhlIG1lbnUKICAuYXR0cigidmFsdWUiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZDsgfSkgCgp2YXIgdG9vbHRpcCA9IGQzLnNlbGVjdCgiYm9keSIpCiAgICAuYXBwZW5kKCJkaXYiKQogICAgLnN0eWxlKCJwb3NpdGlvbiIsICJhYnNvbHV0ZSIpCiAgICAuc3R5bGUoInotaW5kZXgiLCAiMTAiKQogICAgLnN0eWxlKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpCnZhciBnNCA9IGdyb3VwLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwiZm9yX2JydXNoIik7IC8vCgpmdW5jdGlvbiBkcm9wY2hhbmdlKCl7CiAgdmFyIG5ld0NlcmVhbCA9IGQzLnNlbGVjdCh0aGlzKS5wcm9wZXJ0eSgndmFsdWUnKQogIHNlbGYuR0xPQkFMLkxvZ19maWxlLnB1c2goWyd0aW1lc3RhbXAnLG5ldyBEYXRlKCkuZ2V0VGltZSgpLzEwMDAsJ25ld0NlcmVhbCcsbmV3Q2VyZWFsLCdcbiddKQoKICAKICBpZiAobmV3Q2VyZWFsPT0nem9vbScpewogICAgc3ZnLmNhbGwoem9vbSkKICAgICBnNC5zdHlsZSgiZGlzcGxheSIsIm5vbmUiKQogICAgICBzZWxmLm15Q2lyY2xlLm9uKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpe3JldHVybiBudWxsfSkKICAgIC5vbigibW91c2Vtb3ZlIiwgZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0pCiAgICAub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0pCiAgICBkMy5zZWxlY3QoIiNtYXAiKQogICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbigpe3JldHVybiBudWxsfSkKICB9CiAgZWxzZSBpZiAobmV3Q2VyZWFsPT0nc2VsZWN0IGFyZWEnKXsKICAgIHN2Zy5vbignLnpvb20nLCBudWxsKQogICAgZzQuc3R5bGUoImRpc3BsYXkiLCJibG9jayIpCiAgZzQKICAgIC5jYWxsKCBkMy5icnVzaCgpICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGJydXNoIGZlYXR1cmUgdXNpbmcgdGhlIGQzLmJydXNoIGZ1bmN0aW9uCiAgICAgIC5leHRlbnQoIFsgWzAsMF0sIFt3aWR0aCxoZWlnaHRdIF0gKSAvLyBpbml0aWFsaXNlIHRoZSBicnVzaCBhcmVhOiBzdGFydCBhdCAwLDAgYW5kIGZpbmlzaGVzIGF0IHdpZHRoLGhlaWdodDogaXQgbWVhbnMgSSBzZWxlY3QgdGhlIHdob2xlIGdyYXBoIGFyZWEKICAgICAgLm9uKCJlbmQiLCB1cGRhdGFfY2hhcnQpCiAgICApICAgIAogIH0KICBlbHNlIGlmICgobmV3Q2VyZWFsPT0nc2hvdyBwb2ludCBpbmZvJykpCiAgICB7c3ZnLm9uKCcuem9vbScsIG51bGwpCiAgICAgIGc0LnN0eWxlKCJkaXNwbGF5Iiwibm9uZSIpCiAgICAgIHNlbGYubXlDaXJjbGUub24oIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKGQpe3JldHVybiB0b29sdGlwLnN0eWxlKCJ2aXNpYmlsaXR5IiwgInZpc2libGUiKS50ZXh0KGQucHJvcGVydGllcy5uYW1lKycsJytkLnByb3BlcnRpZXMuYWdlKyflsoEnKSwKICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoImZpbGwiLCIjQkM4RjhGIiksCiAgICAgIGQzLnNlbGVjdCgiI21hcCIpCiAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbigpe3NlbGYuR0xPQkFMLkxvZ19maWxlLnB1c2goWyd0aW1lc3RhbXAnLG5ldyBEYXRlKCkuZ2V0VGltZSgpLzEwMDAsJ2hvdmVyLW1hcC1wb3NpdGlvbicsZDMubW91c2UodGhpcyksZC5wcm9wZXJ0aWVzLm5hbWUsJ1xuJ10pO30pfSkKICAgIC5vbigibW91c2Vtb3ZlIiwgZnVuY3Rpb24oZCl7cmV0dXJuIHRvb2x0aXAuc3R5bGUoInRvcCIsCiAgICAoZDMuZXZlbnQucGFnZVktMTApKyJweCIpLnN0eWxlKCJsZWZ0IiwoZDMuZXZlbnQucGFnZVgrMTApKyJweCIpLnRleHQoZC5wcm9wZXJ0aWVzLm5hbWUrJywnK2QucHJvcGVydGllcy5hZ2UrJ+WygScpO30pCiAgICAub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24oKXtyZXR1cm4gdG9vbHRpcC5zdHlsZSgidmlzaWJpbGl0eSIsICJoaWRkZW4iKSxkMy5zZWxlY3QodGhpcykudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMCkuYXR0cigiZmlsbCIsIiM2NDk1RUQiKTt9KQogICAgfQp9CgogIGZ1bmN0aW9uIHVwZGF0YV9jaGFydCgpewogICAgdmFyIHNlbGVjdF9kYXRhID0gdXBkYXRlX2RhdGEoKQogIEJ1cy4kZW1pdCgiTWFwX3NlbGVjdF9kYXRhIiwgc2VsZWN0X2RhdGEpCiAgfQoKICBmdW5jdGlvbiB1cGRhdGVfZGF0YSgpIHsKICAgIHZhciBzZWxlY3RfZGF0YSA9IFtdCiAgICB2YXIgZXh0ZW50ID0gZDMuZXZlbnQuc2VsZWN0aW9uCiAgICBzZWxmLm15Q2lyY2xlLmNsYXNzZWQoInNlbGVjdGVkX2ZpcnN0IiwgZnVuY3Rpb24oZCl7IHJldHVybiBpc0JydXNoZWQoZXh0ZW50LCBwcm9qZWN0aW9uKGQuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpWzBdLHByb2plY3Rpb24oZC5nZW9tZXRyeS5jb29yZGluYXRlcylbMV0pIH0pIAogICAgc2VsZi5HTE9CQUwuTG9nX2ZpbGUucHVzaChbJ3RpbWVzdGFtcCcsbmV3IERhdGUoKS5nZXRUaW1lKCkvMTAwMCwnQnJ1c2gtTWFwLVBvc2l0aW9uJyxleHRlbnRbMF0sZXh0ZW50WzFdLCdcbiddKQogICAgZm9yKGk9MCwgbGVuPXBsYWNlcy5mZWF0dXJlcy5sZW5ndGgtMTsgaTxsZW47IGkrKyl7CiAgICAgIHZhciBkID0gcGxhY2VzLmZlYXR1cmVzW2ldCiAgICAgIGlmKGlzQnJ1c2hlZChleHRlbnQsIHByb2plY3Rpb24oZC5nZW9tZXRyeS5jb29yZGluYXRlcylbMF0scHJvamVjdGlvbihkLmdlb21ldHJ5LmNvb3JkaW5hdGVzKVsxXSkpCiAgICAgICAgey8vYSA9IGErcGFyc2VJbnQoZC5wcm9wZXJ0aWVzLmFnZSl9CiAgICAgICAgc2VsZWN0X2RhdGEucHVzaChkKX0KICAgICAgfQogICAgICByZXR1cm4gc2VsZWN0X2RhdGEKICAgICAgfQoKZnVuY3Rpb24gaXNCcnVzaGVkKGJydXNoX2Nvb3JkcywgY3gsIGN5KSB7CiAgICAgICB2YXIgeDAgPSBicnVzaF9jb29yZHNbMF1bMF0sCiAgICAgICAgICAgeDEgPSBicnVzaF9jb29yZHNbMV1bMF0sCiAgICAgICAgICAgeTAgPSBicnVzaF9jb29yZHNbMF1bMV0sCiAgICAgICAgICAgeTEgPSBicnVzaF9jb29yZHNbMV1bMV07CiAgICAgIHJldHVybiB4MCA8PSBjeCAmJiBjeCA8PSB4MSAmJiB5MCA8PSBjeSAmJiBjeSA8PSB5MTsgICAgLy8gVGhpcyByZXR1cm4gVFJVRSBvciBGQUxTRSBkZXBlbmRpbmcgb24gaWYgdGhlIHBvaW50cyBpcyBpbiB0aGUgc2VsZWN0ZWQgYXJlYQogIH0KCiAgfSl9LAogIApzZWxlY3RfbmV3X3BvaW50KCl7CiAgICB2YXIgZGF0YSA9IHRoaXMuSGlzdF9zZWxlY3RfZGF0YQogICAgdGhpcy5teUNpcmNsZS5jbGFzc2VkKCJzZWxlY3RlZF9zZWNvbmQiLCBmdW5jdGlvbihkKXtyZXR1cm4gaXNTZWxlY3RlZEJ5SGlzdChkLGRhdGEpfSkKICAgIC8vdGhpcy5teUxpbmsuc3R5bGUoInN0cm9rZSIsZnVuY3Rpb24oZCkge3JldHVybiBMaW5raXNTZWxlY3RlZEJ5SGlzdChkKX0pCiAgICAvL3RoaXMubXlMaW5rLnN0eWxlKCJvcGFjaXR5IixmdW5jdGlvbihkKSB7cmV0dXJuIExpbmtpc1NlbGVjdGVkQnlIaXN0X08oZCl9KQogICAgLy90aGlzLm15TGluay5zdHlsZSgic3Ryb2tlLXdpZHRoIixmdW5jdGlvbihkKSB7cmV0dXJuIExpbmtpc1NlbGVjdGVkQnlIaXN0X1MoZCl9KQogICAgCmZ1bmN0aW9uIGlzU2VsZWN0ZWRCeUhpc3QoYSxkYXRhKXsKICBmb3IodmFyIGk9MCxsZW49ZGF0YS5sZW5ndGg7aTxsZW47aSsrKXsKICAgIHZhciBnZW8gPSBkYXRhW2ldLnByb3BlcnRpZXMubmFtZQogICAgdmFyIGFnZV9zZWxlY3QgPSBkYXRhW2ldLnByb3BlcnRpZXMuYWdlCiAgICBpZiAoYS5wcm9wZXJ0aWVzLm5hbWU9PWdlbyl7CiAgICAgIGlmKGEucHJvcGVydGllcy5hZ2U9PWFnZV9zZWxlY3QpewogICAgICAgIHJldHVybiAoMT09MSkKICAgICAgfX19CiAgcmV0dXJuICgxPT0wKX0KfSwKc2VsZWN0X25ld19wb2ludF9Gb3JjZSgpewogIHZhciBkYXRhID0gdGhpcy5Gb3JjZV9zZWxlY3RfZGF0YQogIHRoaXMubXlDaXJjbGUuY2xhc3NlZCgic2VsZWN0ZWRfc2Vjb25kIiwgZnVuY3Rpb24oZCl7cmV0dXJuIGQucHJvcGVydGllcy5uYW1lPT1kYXRhfSkKfQp9fQo="},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Map.vue","sourceRoot":"src/components","sourcesContent":["/* eslint-disable */\n<template>\n  <div id=\"map\">\n    <p>\n      <h4>Footprint</h4>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\"\n//import Vue from 'vue';\nimport Bus from '../assets/bus.js';\n//var msgCenter = new Vue()\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      select_data:'',\n      Hist_select_data:'',\n      Force_select_data:'',\n      myCircle:'',\n      myLink:'',\n      svg:''\n    };\n  },\n  //created() {\n    // 在需要的传递数据的时候调用sendData方法，这里模拟调用\n    //this.sendData();\n  //},\n  mounted() {\n    this.generateArc();\n    this.handle()\n    //this.sendData();\n  },\n  methods: {\n    handle: function () {\n    Bus.$emit(\"Map_age\", this.select_value),\n    Bus.$on(\"Hist_select_data\", (val) => {\n      this.Hist_select_data=val;\n      this.select_new_point()}),\n    Bus.$on(\"Force_select_data\", (val) => {\n      this.Force_select_data=val;\n      this.select_new_point_Force()})},\n    generateArc() {\n      const width = 600;\n      const height = 600;\n\n      const projection = d3.geoAlbers()\n          .center([0, 30])\n          .rotate([-110, 0])\n          .parallels([20, 60])\n          .translate([width / 2, height / 2])\n          .scale(1370)\n\n\n      const path = d3.geoPath()\n          .projection(projection)\n          .pointRadius(2);\n      const svg = d3\n        .select(\"#map\")\n        .append(\"svg\")\n        .attr(\"width\", width)\n        .attr(\"height\", height);\n      let self = this\n      d3.json(\"sushi_map.json\", function(error, point) {\n      var subunits = topojson.feature(point, point.objects.china),\n      places = topojson.feature(point, point.objects.places);\n  var zoom = d3.zoom()\n      .scaleExtent([0.5,3])//用于设置最小和最大的缩放比例\n      .on(\"zoom\",zoomed) \n\n  //svg.call(zoom); //调用缩放拖拽功能\nself.GLOBAL.Log_file.push(['Start_timestamp',new Date().getTime()/1000,'\\n'])\n//编写 平移函数\nfunction reset() {\n    \n      svg.transition().duration(750).call( //duration过渡时间\n        zoom.transform,\n        d3.zoomIdentity, //控制缩放中心的为鼠标当前位置\n        d3.zoomTransform(svg.node()).invert([width / 2, height / 2]) //弹性动画的圆心位置\n      );\n}\n// 缩放函数\nfunction zoomed() {\n    const transform = d3.event.transform; //识别鼠标事件\n    self.GLOBAL.Log_file.push(['timestamp',new Date().getTime()/1000,'Zoom-Map-Value',transform,'\\n'])\n    group.attr(\"transform\", transform); //将缩放结果传给g\n    var k = Math.sqrt(100 / projection.scale()); //修改地图尺寸\n    group.attr(\"stroke-width\", 1 / k); //修改对应的属性\n}\n\n    var group = svg.append(\"g\").attr(\"id\",\"group\").datum({\n    x: 0,\n    y: 0\n  }).on(\"click\", reset);  //定义点击事件\n      var g1 = group.append(\"g\").attr(\"id\",\"for_path\"); //新增组，用于存储不同对象\n      var g2 = group.append(\"g\").attr(\"id\",\"for_circle\");\n      var g3 = group.append(\"g\").attr(\"id\",\"for_line\").attr(\"pointer-events\",\"none\");\n\n\n  g1.selectAll(\".subunit\")\n      .data(subunits.features)\n    .enter().append(\"path\")\n      .attr(\"class\", function(d) { return \"subunit \" + d.id; })\n      .attr(\"d\", path)\n      .attr('stroke','#222')\n      .attr('stroke-width','1px')\n      .attr('fill','#ddd');\n\n// \nvar link1s = [\n  {type: \"LineString\", age:0,coordinates: [[0,0],[0,0]]}\n]\n    for(var i=0, len=places.features.length-1; i<len; i++){\n    // (note: loop until length - 1 since we're getting the next\n    //  item with i+1)\n        link1s.push({\n            type: \"LineString\",\n            age : places.features[i].properties.age,\n            coordinates: [\n                [ places.features[i].geometry.coordinates[0], places.features[i].geometry.coordinates[1]],\n                [ places.features[i+1].geometry.coordinates[0], places.features[i+1].geometry.coordinates[1]]]\n        });\n    }\n    g3.append('svg:defs').append('svg:marker')\n        .attr('id', 'end-arrow')\n        .attr('viewBox', '0 -5 8 8')\n        .attr('refX', 8)\n        .attr('markerWidth', 3)//箭头参数适当按需调整\n        .attr('markerHeight', 3)\n        .attr('orient', 'auto')\n        .append('svg:path')\n        .attr('d', 'M0,-5L10,0L0,5')//绘制箭头形状\n        .attr('fill', '#483D8B');\n  // 加label\n  self.myCircle = g2.selectAll(\".place-point\")\n      .data(places.features)\n    .enter()\n    .append(\"circle\")\n      .attr(\"class\", \"place-point\")\n      .attr(\"transform\", function(d) { return \"translate(\" + projection(d.geometry.coordinates) + \")\"; })\n      .attr(\"x\", function(d) { return d.geometry.coordinates[0] > -1 ? 6 : -6; })\n      .attr(\"dy\", \".35em\")\n      .attr(\"r\", function(d) { return d.properties.age/10; })\n      .attr(\"fill\", \"#6495ED\")\n      .attr(\"opacity\",0.7)\n  self.myLink = g3.selectAll(\"myPath\")\n      .data(link1s)\n      .enter()\n      .append(\"path\")\n        .attr(\"d\", function(d){ return path(d)})\n        .style(\"fill\", \"none\")\n        .style(\"stroke\", \"#483D8B\")\n        .style(\"stroke-width\", 2)\n        .style(\"opacity\",0.4)\n        .attr(\"marker-end\", \"url(#end-arrow)\")\n  self.svg = svg\n  /*\n  svg\n    .call( d3.brush()                 // Add the brush feature using the d3.brush function\n      .extent( [ [0,0], [width,height] ] ) // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area\n      .on(\"end\", updata_chart)\n    )\n    */\nvar allGroup = ['none',\"select area\", \"zoom\", \"show point info\"]\nvar dropdownButton = d3.select(\"#map\")\n  .append('select')\n  .on(\"change\", dropchange)\n\n// add the options to the button\ndropdownButton // Add a button\n  .selectAll('myOptions') // Next 4 lines add 6 options = 6 colors\n  .data(allGroup)\n  .enter()\n  .append('option')\n  .text(function (d) { return d; }) // text showed in the menu\n  .attr(\"value\", function (d) { return d; }) \n\nvar tooltip = d3.select(\"body\")\n    .append(\"div\")\n    .style(\"position\", \"absolute\")\n    .style(\"z-index\", \"10\")\n    .style(\"visibility\", \"hidden\")\nvar g4 = group.append(\"g\").attr(\"id\",\"for_brush\"); //\n\nfunction dropchange(){\n  var newCereal = d3.select(this).property('value')\n  self.GLOBAL.Log_file.push(['timestamp',new Date().getTime()/1000,'newCereal',newCereal,'\\n'])\n\n  \n  if (newCereal=='zoom'){\n    svg.call(zoom)\n     g4.style(\"display\",\"none\")\n      self.myCircle.on(\"mouseover\", function(){return null})\n    .on(\"mousemove\", function(){return null})\n    .on(\"mouseout\", function(){return null})\n    d3.select(\"#map\")\n    .on('mouseover', function(){return null})\n  }\n  else if (newCereal=='select area'){\n    svg.on('.zoom', null)\n    g4.style(\"display\",\"block\")\n  g4\n    .call( d3.brush()                 // Add the brush feature using the d3.brush function\n      .extent( [ [0,0], [width,height] ] ) // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area\n      .on(\"end\", updata_chart)\n    )    \n  }\n  else if ((newCereal=='show point info'))\n    {svg.on('.zoom', null)\n      g4.style(\"display\",\"none\")\n      self.myCircle.on(\"mouseover\", function(d){return tooltip.style(\"visibility\", \"visible\").text(d.properties.name+','+d.properties.age+'岁'),\n      d3.select(this).attr(\"fill\",\"#BC8F8F\"),\n      d3.select(\"#map\")\n  .on('mouseover', function(){self.GLOBAL.Log_file.push(['timestamp',new Date().getTime()/1000,'hover-map-position',d3.mouse(this),d.properties.name,'\\n']);})})\n    .on(\"mousemove\", function(d){return tooltip.style(\"top\",\n    (d3.event.pageY-10)+\"px\").style(\"left\",(d3.event.pageX+10)+\"px\").text(d.properties.name+','+d.properties.age+'岁');})\n    .on(\"mouseout\", function(){return tooltip.style(\"visibility\", \"hidden\"),d3.select(this).transition().duration(500).attr(\"fill\",\"#6495ED\");})\n    }\n}\n\n  function updata_chart(){\n    var select_data = update_data()\n  Bus.$emit(\"Map_select_data\", select_data)\n  }\n\n  function update_data() {\n    var select_data = []\n    var extent = d3.event.selection\n    self.myCircle.classed(\"selected_first\", function(d){ return isBrushed(extent, projection(d.geometry.coordinates)[0],projection(d.geometry.coordinates)[1]) }) \n    self.GLOBAL.Log_file.push(['timestamp',new Date().getTime()/1000,'Brush-Map-Position',extent[0],extent[1],'\\n'])\n    for(i=0, len=places.features.length-1; i<len; i++){\n      var d = places.features[i]\n      if(isBrushed(extent, projection(d.geometry.coordinates)[0],projection(d.geometry.coordinates)[1]))\n        {//a = a+parseInt(d.properties.age)}\n        select_data.push(d)}\n      }\n      return select_data\n      }\n\nfunction isBrushed(brush_coords, cx, cy) {\n       var x0 = brush_coords[0][0],\n           x1 = brush_coords[1][0],\n           y0 = brush_coords[0][1],\n           y1 = brush_coords[1][1];\n      return x0 <= cx && cx <= x1 && y0 <= cy && cy <= y1;    // This return TRUE or FALSE depending on if the points is in the selected area\n  }\n\n  })},\n  \nselect_new_point(){\n    var data = this.Hist_select_data\n    this.myCircle.classed(\"selected_second\", function(d){return isSelectedByHist(d,data)})\n    //this.myLink.style(\"stroke\",function(d) {return LinkisSelectedByHist(d)})\n    //this.myLink.style(\"opacity\",function(d) {return LinkisSelectedByHist_O(d)})\n    //this.myLink.style(\"stroke-width\",function(d) {return LinkisSelectedByHist_S(d)})\n    \nfunction isSelectedByHist(a,data){\n  for(var i=0,len=data.length;i<len;i++){\n    var geo = data[i].properties.name\n    var age_select = data[i].properties.age\n    if (a.properties.name==geo){\n      if(a.properties.age==age_select){\n        return (1==1)\n      }}}\n  return (1==0)}\n},\nselect_new_point_Force(){\n  var data = this.Force_select_data\n  this.myCircle.classed(\"selected_second\", function(d){return d.properties.name==data})\n}\n}}\n</script>\n<style>\n\n.selected_first {\n  stroke: black;\n  stroke-width: 1px;\n}\n.selected_second {\n  opacity: 1;\n  stroke: black;\n  stroke-width: 1px;\n  fill: #BC8F8F;\n}\n.subunit.SCT { fill: #ddc; }\n.subunit.WLS { fill: #cdd; }\n.subunit.NIR { fill: #cdc; }\n.subunit.ENG { fill: #dcd; }\n\n.subunit.IRL,\n.subunit-label.IRL {\n  display: none;\n}\n\n.subunit-boundary {\n  fill: none;\n  stroke: #777;\n  stroke-dasharray: 2,2;\n  stroke-linejoin: round;\n}\n\n.subunit-boundary.IRL {\n  stroke: #aaa;\n}\n\n.subunit-label {\n  fill: #777;\n  fill-opacity: .5;\n  font-size: 20px;\n  font-weight: 300;\n  text-anchor: middle;\n}\n.place-point\n.place\n.place-label {\n  fill: #444;\n}\n\ntext {\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 10px;\n  pointer-events: none;\n}\n#label {\n  position: absolute;\n  left: 10px;\n  font-weight: 100;\n  font-family: \"Proxima Nova\", \"Montserrat\", sans-serif;\n}\n\n.hover {\n    fill: yellow;   \n}\n/*\n#sliderContainer {\n    text-align: center;\n    top: 600px;\n    left:10px;\n}\n#histplot{\n    text-align: center;\n    top: 600px;\n    left:10px;\n}\n#map {\n    top: 2000px;\n    left:1000px;\n}\n*/\n</style>"]}]}