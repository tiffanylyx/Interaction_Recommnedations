{"remainingRequest":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/src/components/Force.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/src/components/Force.vue","mtime":1617180576411},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKLy9pbXBvcnQgKiBhcyB0b3BvanNvbiBmcm9tICJ0b3BvanNvbiIKaW1wb3J0IEJ1cyBmcm9tICcuLi9hc3NldHMvYnVzLmpzJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXBwIiwKICBkYXRhKCl7CiAgICByZXR1cm57CiAgICAgIGRhdGE6dW5kZWZpbmVkLAogICAgICBwbGFjZTpbXSwKICAgICAgYWxsX3BsYWNlczp7fSwKICAgICAgc3ZnMjp1bmRlZmluZWQsCiAgICAgIHdpZHRoMiA6dW5kZWZpbmVkLAogICAgICBoZWlnaHQyIDogdW5kZWZpbmVkLAogICAgICBIaXN0X3NlbGVjdF9kYXRhOicnLAogICAgICBub2RlRWxlbWVudHM6dW5kZWZpbmVkLAogICAgICB2ZXJ0aWNlczonJwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaGFuZGxlKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZTogZnVuY3Rpb24gKCkgewogICAgQnVzLiRvbigiU3RhcnRfUGxhY2UiLCAoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlRm9yY2UoKQogICAgICAgICAgICAgIH0pLCAgCiAgICBCdXMuJG9uKCJNYXBfc2VsZWN0X2RhdGEiLCAodmFsKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB2YWwKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRm9yY2UoKQogICAgICAgICAgICAgIH0pLAogICAgQnVzLiRvbigiSGlzdF9zZWxlY3RfZGF0YSIsICh2YWwpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuSGlzdF9zZWxlY3RfZGF0YSA9IHZhbAogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RfbmV3X3BvaW50KCkKICAgICAgICAgICAgICB9KQogICAgQnVzLiRvbigiR2V0X1ByZWRpY3QiLCh2YWwpID0+IHt0aGlzLkdldF9QcmVkaWN0KHZhbCl9KQogIH0sCiAgICBnZW5lcmF0ZUZvcmNlKCkgewp2YXIgZGF0YV9wbGFjZSA9IFtdCnZhciB3aWR0aDIgPSA0MDAsCiAgICBoZWlnaHQyID0gMjg1Owp0aGlzLndpZHRoMiA9IHdpZHRoMgp0aGlzLmhlaWdodDIgPSBoZWlnaHQyCmNvbnN0IHN2ZzIgPSBkMy5zZWxlY3QoIiNmb3JjZSIpLmFwcGVuZCgic3ZnIikKCiAgc3ZnMi5hdHRyKCJ3aWR0aCIsIHdpZHRoMikKICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQyKTsKCi8vIGNlbnRlciBtYXJrZXIKc3ZnMi5hcHBlbmQoJ2NpcmNsZScpCiAgICAuYXR0cigncicsIDMpCiAgICAuYXR0cignY3gnLCB3aWR0aDIgLyAyKQogICAgLmF0dHIoJ2N5JywgaGVpZ2h0MiAvIDIpOwp0aGlzLnN2ZzIgPSBzdmcyCmxldCBzZWxmID0gdGhpcwovKgpkMy5qc29uKCJzdXNoaV9tYXAuanNvbiIsIGZ1bmN0aW9uKGVycm9yLCBwb2ludCkgewogIGNvbnN0IHBsYWNlc19hbGwgPSB0b3BvanNvbi5mZWF0dXJlKHBvaW50LCBwb2ludC5vYmplY3RzLnBsYWNlcykKKi8KdmFyIHBsYWNlc19hbGwgPSBzZWxmLkdMT0JBTC5wbGFjZV9ub3cKdmFyIG5vZGVzID0gW10KdmFyIGxpbmtzPVtdCiAgICBmb3IodmFyIGk9MCwgbGVuPWRhdGFfcGxhY2UubGVuZ3RoO2k8bGVuO2krKyl7CiAgICAgICAgbm9kZXMucHVzaCh7Im5hbWUiOmRhdGFfcGxhY2VbaV19KQogICAgICB9CiAgICBmb3IoaT0xLCBsZW49cGxhY2VzX2FsbC5mZWF0dXJlcy5sZW5ndGgtMTsgaTxsZW47IGkrKyl7CiAgICAvLyAobm90ZTogbG9vcCB1bnRpbCBsZW5ndGggLSAxIHNpbmNlIHdlJ3JlIGdldHRpbmcgdGhlIG5leHQKICAgIC8vICBpdGVtIHdpdGggaSsxKQogICAgdmFyIHBsYWNlMSA9IHBsYWNlc19hbGwuZmVhdHVyZXNbaV0ucHJvcGVydGllcy5uYW1lLnRvU3RyaW5nKCkKICAgIHZhciBwbGFjZTIgPSBwbGFjZXNfYWxsLmZlYXR1cmVzW2krMV0ucHJvcGVydGllcy5uYW1lLnRvU3RyaW5nKCkKICAgIC8vIGlmICgocGxhY2UxIGluIGRhdGEpJiYocGxhY2UyIGluIGRhdGEpKXsKICAgIHZhciBhID0gY2hlY2tfaW4oZGF0YV9wbGFjZSwgcGxhY2UxKQogICAgdmFyIGIgPSBjaGVja19pbihkYXRhX3BsYWNlLCBwbGFjZTIpCiAgICBpZigoYT09IlRSVUUiKSAmJiAoYj09IlRSVUUiKSl7CiAgICAgIHZhciBpbmRleDEgPSBkYXRhX3BsYWNlLmZpbmRJbmRleChjaGVja19lcXVhbDEpCiAgICAgIHZhciBpbmRleDIgPSBkYXRhX3BsYWNlLmZpbmRJbmRleChjaGVja19lcXVhbDIpCiAgICAgIGxpbmtzLnB1c2goeyJzb3VyY2UiOiBpbmRleDEsICJ0YXJnZXQiOiBpbmRleDJ9KQogICAgfQp9CmZ1bmN0aW9uIGNoZWNrX2VxdWFsMShwbGFjZSl7cmV0dXJuIHBsYWNlLnRvU3RyaW5nKCk9PXBsYWNlMX0KZnVuY3Rpb24gY2hlY2tfZXF1YWwyKHBsYWNlKXtyZXR1cm4gcGxhY2UudG9TdHJpbmcoKT09cGxhY2UyfQpmdW5jdGlvbiBjaGVja19pbihkYXRhLCBwbGFjZSl7CiAgZm9yKHZhciBpPTAsIGxlbj1wbGFjZXNfYWxsLmZlYXR1cmVzLmxlbmd0aC0xOyBpPGxlbjsgaSsrKXsKICAgIHZhciBkID0gZGF0YVtpXQogICAgaWYoZD09IHBsYWNlKXsKICAgICAgcmV0dXJuICdUUlVFJwogICAgfX0KICByZXR1cm4gJ0ZhbHNlJwp9CnZhciBsaW5rRWxlbWVudHMgPSBzdmcyLnNlbGVjdEFsbCgpCiAgICAgICAgLmRhdGEobGlua3MpCiAgICAgICAgLmVudGVyKCkKICAgICAgICAuYXBwZW5kKCdsaW5lJykKICAgICAgICAuYXR0cignc3Ryb2tlJywgJ2JsYWNrJykKICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgJzJweCcpOwpzZWxmLm5vZGVFbGVtZW50cyA9IHN2ZzIuc2VsZWN0QWxsKCkKICAgICAgICAuZGF0YShub2RlcykKICAgICAgICAuZW50ZXIoKQogICAgICAgIC5hcHBlbmQoJ2NpcmNsZScpCiAgICAgICAgLmF0dHIoJ3InLCA1KQogICAgICAgIC5hdHRyKCdmaWxsJywgJ3JlZCcpCgp2YXIgdGV4dEVsZW1lbnRzID0gc3ZnMi5zZWxlY3RBbGwoKQogIC5kYXRhKG5vZGVzKQogIC5lbnRlcigpLmFwcGVuZCgndGV4dCcpCiAgICAudGV4dChub2RlID0+IG5vZGUubmFtZSkKICAgIC5hdHRyKCdmb250LXNpemUnLCAxNSkKICAgIC5hdHRyKCdkeCcsIDE1KQogICAgLmF0dHIoJ2R5JywgNCkKY29uc3Qgc2ltdWxhdGlvbiA9IGQzLmZvcmNlU2ltdWxhdGlvbigpCiAgICAgICAgICAuZm9yY2UoJ2xpbmsnLCBkMy5mb3JjZUxpbmsoKS5kaXN0YW5jZSg4MCkpCiAgICAgICAgICAuZm9yY2UoJ2NoYXJnZScsIGQzLmZvcmNlTWFueUJvZHkoKSkKICAgICAgICAgIC5mb3JjZSgnY2VudGVyJywgZDMuZm9yY2VDZW50ZXIod2lkdGgyIC8gMiwgaGVpZ2h0MiAvIDIpKTsKCnNpbXVsYXRpb24KICAgIC5ub2Rlcyhub2RlcykKICAgIC5vbigndGljaycsICgpID0+IHsKICBsaW5rRWxlbWVudHMKICAgICAgICAuYXR0cigneDEnLCBkID0+IGQuc291cmNlLngpCiAgICAgICAgLmF0dHIoJ3kxJywgZCA9PiBkLnNvdXJjZS55KQogICAgICAgIC5hdHRyKCd4MicsIGQgPT4gZC50YXJnZXQueCkKICAgICAgICAuYXR0cigneTInLCBkID0+IGQudGFyZ2V0LnkpCiAgc2VsZi5ub2RlRWxlbWVudHMKICAgIC5hdHRyKCdjeCcsIG5vZGUgPT4gbm9kZS54KQogICAgLmF0dHIoJ2N5Jywgbm9kZSA9PiBub2RlLnkpCiAgdGV4dEVsZW1lbnRzCiAgICAuYXR0cigneCcsIG5vZGUgPT4gbm9kZS54KQogICAgLmF0dHIoJ3knLCBub2RlID0+IG5vZGUueSkKfSkKCnNpbXVsYXRpb24KICAgIC5mb3JjZSgnbGluaycpCiAgICAubGlua3MobGlua3MpOwovKgpmdW5jdGlvbiBkcmFnc3RhcnRlZChkKSB7CiAgICBpZiAoIWQzLmV2ZW50LmFjdGl2ZSkgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwLjMpLnJlc3RhcnQoKTsKICAgIGQuZnggPSBkLng7CiAgICBkLmZ5ID0gZC55Owp9CgpmdW5jdGlvbiBkcmFnZ2VkKGQpIHsKICAgIGQuZnggPSBkMy5ldmVudC54OwogICAgZC5meSA9IGQzLmV2ZW50Lnk7Cn0KCmZ1bmN0aW9uIGRyYWdlbmRlZChkKSB7CiAgICBpZiAoIWQzLmV2ZW50LmFjdGl2ZSkgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwKTsKICAgIGQuZnggPSBudWxsOwogICAgZC5meSA9IG51bGw7Cn0KKi8KfSwKdXBkYXRlRm9yY2UoKXsKCiAgbGV0IHNlbGYgPSB0aGlzCmZ1bmN0aW9uIHVuaXF1ZShhcnIpIHsKICAgIHJldHVybiBhcnIuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBhcnIpIHsKICAgICAgLy8g5Y+W5Ye65YWD57SgLCDor6XlhYPntKDlnKjmlbDnu4TkuK3nrKzkuIDmrKHlh7rnjrDnmoTntKLlvJUgPT09IOW9k+WJjee0ouW8leWAvAogICAgICByZXR1cm4gYXJyLmluZGV4T2YoaXRlbSwgMCkgPT09IGluZGV4OwogICAgfSk7Cn0KZnVuY3Rpb24gY291bnRUaW1lcyhkYXRhKSB7CiAgICByZXR1cm4gZGF0YS5yZWR1Y2UoZnVuY3Rpb24odGltZSwgbmFtZSkgewogICAgICAgIGlmIChuYW1lIGluIHRpbWUpIHsKICAgICAgICAgICAgdGltZVtuYW1lXSsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRpbWVbbmFtZV0gPSAxOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGltZTsKICAgIH0sIHt9KTsKfQoKdmFyIGRhdGFfc2VsZWN0ID0gW10KdmFyIGRhdGFfc2VsZWN0MSA9IFtdCnZhciBwbGFjZV9jb3VudCA9IFtdCmZvcih2YXIgaT0wLCBsZW49dGhpcy5kYXRhLmxlbmd0aC0xOyBpPGxlbjsgaSsrKXsKICB2YXIgZCA9IHRoaXMuZGF0YVtpXQogIGRhdGFfc2VsZWN0MS5wdXNoKGQucHJvcGVydGllcy5uYW1lLnRvU3RyaW5nKCkpfQogIGRhdGFfc2VsZWN0ID0gdW5pcXVlKGRhdGFfc2VsZWN0MSkKICBwbGFjZV9jb3VudCA9IGNvdW50VGltZXMoZGF0YV9zZWxlY3QxKQp2YXIgbWF4X2NvdW50ID0gMApmb3IoaSBpbiBwbGFjZV9jb3VudCl7CiAgdmFyIGl0ZW0gPSBwbGFjZV9jb3VudFtpXTsKICBpZiAoaXRlbT5tYXhfY291bnQpewogICAgbWF4X2NvdW50ID0gaXRlbQogIH0KfQogIHZhciBoZWlnaHQyID0gdGhpcy5oZWlnaHQyCiAgdmFyIHdpZHRoMiA9IHRoaXMud2lkdGgyCiAgdmFyIHN2ZzIgPSB0aGlzLnN2ZzIKICB2YXIgcGxhY2VzX2FsbCA9IHNlbGYuR0xPQkFMLnBsYWNlX25vdwogIHN2ZzIuc2VsZWN0QWxsKCIqIikucmVtb3ZlKCk7CiAgdGhpcy5nMV81ID0gc3ZnMi5hcHBlbmQoImciKS5hdHRyKCJpZCIsImZvcl9pbnRlcmFjdGlvbl9zdWdnZXN0aW9uIik7IAogIHN2ZzIuYXBwZW5kKCdjaXJjbGUnKQogICAgLmF0dHIoJ3InLCA1KQogICAgLmF0dHIoJ2N4Jywgd2lkdGgyIC8gMikKICAgIC5hdHRyKCdjeScsIGhlaWdodDIgLyAyKTsKdmFyIG5vZGVzID0gW10KdmFyIGxpbmtzPVtdCiAgICBmb3IoaT0wLCBsZW49ZGF0YV9zZWxlY3QubGVuZ3RoO2k8bGVuO2krKyl7CiAgICAgICAgbm9kZXMucHVzaCh7Im5hbWUiOmRhdGFfc2VsZWN0W2ldfSkKICAgICAgfQogICAgZm9yKGk9MSwgbGVuPXBsYWNlc19hbGwuZmVhdHVyZXMubGVuZ3RoLTE7IGk8bGVuOyBpKyspewogICAgLy8gKG5vdGU6IGxvb3AgdW50aWwgbGVuZ3RoIC0gMSBzaW5jZSB3ZSdyZSBnZXR0aW5nIHRoZSBuZXh0CiAgICAvLyAgaXRlbSB3aXRoIGkrMSkKICAgIHZhciBwbGFjZTEgPSBwbGFjZXNfYWxsLmZlYXR1cmVzW2ldLnByb3BlcnRpZXMubmFtZS50b1N0cmluZygpCiAgICB2YXIgcGxhY2UyID0gcGxhY2VzX2FsbC5mZWF0dXJlc1tpKzFdLnByb3BlcnRpZXMubmFtZS50b1N0cmluZygpCiAgICAvLyBpZiAoKHBsYWNlMSBpbiBkYXRhKSYmKHBsYWNlMiBpbiBkYXRhKSl7CiAgICB2YXIgYSA9IGNoZWNrX2luKGRhdGFfc2VsZWN0LCBwbGFjZTEpCiAgICB2YXIgYiA9IGNoZWNrX2luKGRhdGFfc2VsZWN0LCBwbGFjZTIpCiAgICBpZigoYT09IlRSVUUiKSAmJiAoYj09IlRSVUUiKSl7CiAgICAgIHZhciBpbmRleDEgPSBkYXRhX3NlbGVjdC5maW5kSW5kZXgoY2hlY2tfZXF1YWwxKQogICAgICB2YXIgaW5kZXgyID0gZGF0YV9zZWxlY3QuZmluZEluZGV4KGNoZWNrX2VxdWFsMikKICAgICAgbGlua3MucHVzaCh7InNvdXJjZSI6IGluZGV4MSwgInRhcmdldCI6IGluZGV4Mn0pCiAgICB9fQpmdW5jdGlvbiBjaGVja19pbihkYXRhLCBwbGFjZSl7CiAgZm9yKHZhciBpPTAsIGxlbj1wbGFjZXNfYWxsLmZlYXR1cmVzLmxlbmd0aC0xOyBpPGxlbjsgaSsrKXsKICAgIHZhciBkID0gZGF0YVtpXQogICAgaWYoZD09IHBsYWNlKXsKICAgICAgcmV0dXJuICdUUlVFJwogICAgfX0KICByZXR1cm4gJ0ZhbHNlJwp9CnZhciB2aXNpdGVkID0gW10KLy92YXIgc2VsZWN0X3BsYWNlX2Zyb21fZm9yY2UgPSBbXQp2YXIgbGlua0VsZW1lbnRzID0gc3ZnMi5zZWxlY3RBbGwoKQogICAgICAgIC5kYXRhKGxpbmtzKQogICAgICAgIC5lbnRlcigpCiAgICAgICAgLmFwcGVuZCgnbGluZScpCiAgICAgICAgLmF0dHIoJ3N0cm9rZScsICdibGFjaycpCiAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsICcycHgnKTsKc2VsZi5ub2RlRWxlbWVudHMgPSBzdmcyLnNlbGVjdEFsbCgpCiAgICAgICAgLmRhdGEobm9kZXMpCiAgICAgICAgLmVudGVyKCkKICAgICAgICAuYXBwZW5kKCdjaXJjbGUnKQogICAgICAgIC5hdHRyKCdyJywgZnVuY3Rpb24obm9kZSl7cmV0dXJuIDgqKHBsYWNlX2NvdW50W25vZGUubmFtZV0rNCkvKDUrbWF4X2NvdW50KX0pCiAgICAgICAgLmF0dHIoJ2lkJywgZnVuY3Rpb24obm9kZSl7cmV0dXJuIG5vZGUubmFtZX0pCiAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnIzY0OTVFRCcpCiAgICAgICAgLm9uKCdtb3VzZW92ZXInLGZ1bmN0aW9uKCl7dmFyIHRoYXQgPSB0aGlzCiAgICAgICAgICBkMy5zZWxlY3QodGhhdCkuYXR0cigiZmlsbCIsJ29yYW5nZScpCiAgICAgICAgICBzZWxmLkdMT0JBTC5OZXdfdGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLzEwMDAKICAgICAgICAgIGlmKChzZWxmLkdMT0JBTC5OZXdfdGltZS1zZWxmLkdMT0JBTC5PbGRfdGltZSk+MSl7CiAgICAgICAgICB2aXNpdGVkLnB1c2godGhhdCkKICAgICAgICAgIHNlbGYuR0xPQkFMLlZpc3VhbF9zdGF0ZVsnRm9yY2UnXVsndmlzaXRlZCddID0gdmlzaXRlZAogICAgICAgICAgQnVzLiRlbWl0KCJjaGFuZ2UiLCBzZWxmLkdMT0JBTC5WaXN1YWxfc3RhdGUpCiAgICAgICAgICBzZWxmLkdMT0JBTC5Mb2dfZmlsZS5wdXNoKFsndGltZXN0YW1wJyxzZWxmLkdMT0JBTC5OZXdfdGltZSwnaG92ZXItZm9yY2UtcG9zaXRpb24nLGQzLm1vdXNlKHRoaXMpLHRoYXQuaWQsJ1xuJ10pCiAgICAgICAgICBzZWxmLnBvc3RJbnRlcmFjdGlvbih7J25hbWUnOnNlbGYuR0xPQkFMLkxvZ19maWxlfSkKICAgICAgICAgIHNlbGYuR0xPQkFMLk9sZF90aW1lID0gc2VsZi5HTE9CQUwuTmV3X3RpbWV9CiAgICAgICAgICBCdXMuJGVtaXQoIkZvcmNlX3NlbGVjdF9kYXRhIiwgdGhhdC5pZCl9KQogICAgICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbigpe3JldHVybiBzZWxmLm5vZGVFbGVtZW50cy5hdHRyKCdmaWxsJywgJyM2NDk1RUQnKX0pCgoKdmFyIHRleHRFbGVtZW50cyA9IHN2ZzIuc2VsZWN0QWxsKCkKICAuZGF0YShub2RlcykKICAuZW50ZXIoKS5hcHBlbmQoJ3RleHQnKQogICAgLnRleHQobm9kZSA9PiBub2RlLm5hbWUpCiAgICAuYXR0cignZm9udC1zaXplJywgMTMpCiAgICAuYXR0cignZHgnLCA4KQogICAgLmF0dHIoJ2R5JywgNCkKCmNvbnN0IHNpbXVsYXRpb24gPSBkMy5mb3JjZVNpbXVsYXRpb24oKQogICAgICAgICAgLmZvcmNlKCdsaW5rJywgZDMuZm9yY2VMaW5rKCkuZGlzdGFuY2UoNTApKQogICAgICAgICAgLmZvcmNlKCdjaGFyZ2UnLCBkMy5mb3JjZU1hbnlCb2R5KC0xMDApKQogICAgICAgICAgLmZvcmNlKCdjZW50ZXInLCBkMy5mb3JjZUNlbnRlcih3aWR0aDIgLyAyLCBoZWlnaHQyIC8gMikpOwpCdXMuJGVtaXQoJ0JydXNoX3VwZGF0ZScsJ3N0YXJ0JykKc2ltdWxhdGlvbgogICAgLm5vZGVzKG5vZGVzKQogICAgLm9uKCd0aWNrJywgKCkgPT4gewogIGxpbmtFbGVtZW50cwogICAgICAgIC5hdHRyKCd4MScsIGQgPT4gZC5zb3VyY2UueCkKICAgICAgICAuYXR0cigneTEnLCBkID0+IGQuc291cmNlLnkpCiAgICAgICAgLmF0dHIoJ3gyJywgZCA9PiBkLnRhcmdldC54KQogICAgICAgIC5hdHRyKCd5MicsIGQgPT4gZC50YXJnZXQueSkKICBzZWxmLm5vZGVFbGVtZW50cwogICAgLmF0dHIoJ2N4JywgZnVuY3Rpb24oZCl7cmV0dXJuIGQueCA9IE1hdGgubWF4KDUsTWF0aC5taW4oc2VsZi53aWR0aDItNCxkLngpKX0pCiAgICAuYXR0cignY3knLCBmdW5jdGlvbihkKXtyZXR1cm4gZC55ID0gTWF0aC5tYXgoNSxNYXRoLm1pbihzZWxmLmhlaWdodDItNCxkLnkpKX0pCiAgdGV4dEVsZW1lbnRzCiAgICAuYXR0cigneCcsIG5vZGUgPT4gbm9kZS54KQogICAgLmF0dHIoJ3knLCBub2RlID0+IG5vZGUueSkKfSkKICAgIC5vbignZW5kJywoKSA9PiB7CiAgICAgIHZpc2l0ZWQgPSBbXQogICAgICB2YXIgc2UgPSBbXQogICAgICB2YXIgdmVydGljZXMgPSBbXQpmb3IgKGkgPSAwLCBsZW4gPSBub2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogIHZhciBkID1ub2Rlc1tpXQogIHNlLnB1c2goeydjb29yZGluYXRlcyc6W2QueCxkLnldLCdyJzo4KihwbGFjZV9jb3VudFtkLm5hbWVdKzQpLyg1K21heF9jb3VudCksJ25hbWUnOmQubmFtZX0pCiAgdmVydGljZXMucHVzaChbZC54LGQueV0pCn0Kc2VsZi52ZXJ0aWNlcyA9IHZlcnRpY2VzCkJ1cy4kZW1pdCgnQnJ1c2hfdXBkYXRlJywnZmluc2loJykKc2VsZi5HTE9CQUwuRm9yY2Vfc3RhdGUucHVzaCh7J0ZvcmNlJzpzZX0pCnNlbGYuR0xPQkFMLlZpc3VhbF9zdGF0ZVsnRm9yY2UnXVsnb3ZlcmFsbCddID0gc2UKc2VsZi5HTE9CQUwuVmlzdWFsX3N0YXRlWydGb3JjZSddWyd2aXNpdCddID0gW10KQnVzLiRlbWl0KCJjaGFuZ2UiLCBzZWxmLkdMT0JBTC5WaXN1YWxfc3RhdGUpCiAgICB9KQoKc2ltdWxhdGlvbgogICAgLmZvcmNlKCdsaW5rJykKICAgIC5saW5rcyhsaW5rcyk7CgoKLyoKY29uc29sZS5sb2cobm9kZXNbMV0pCmNvbnNvbGUubG9nKHNlbGYubm9kZUVsZW1lbnRzKQp2YXIgc2UgPSBbXQpmb3IgKGkgPSAwLCBsZW4gPSBzZWxmLm5vZGVFbGVtZW50cy5fZ3JvdXBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgdmFyIGQgPXNlbGYubm9kZUVsZW1lbnRzLl9ncm91cHNbMF1baV0uX19kYXRhX18KICBjb25zb2xlLmxvZyhpLGQsZC54LGQuaWQpCiAgc2UucHVzaCh7J2Nvb3JkaW5hdGVzJzpbZC54LGQueV0sJ3InOjgqKHBsYWNlX2NvdW50W2QubmFtZV0rNCkvKDUrbWF4X2NvdW50KSwnbmFtZSc6ZC5uYW1lfSkKfQpzZWxmLkdMT0JBTC5WaXN1YWxfc3RhdGUucHVzaCh7J0ZvcmNlJzpzZX0pCmNvbnNvbGUubG9nKHNlbGYuR0xPQkFMLlZpc3VhbF9zdGF0ZSkKCmZ1bmN0aW9uIGRyYWdzdGFydGVkKGQpIHsKICAgIGlmICghZDMuZXZlbnQuYWN0aXZlKSBzaW11bGF0aW9uLmFscGhhVGFyZ2V0KDAuMykucmVzdGFydCgpOwogICAgZC5meCA9IGQueDsKICAgIGQuZnkgPSBkLnk7Cn0KCmZ1bmN0aW9uIGRyYWdnZWQoZCkgewogICAgZC5meCA9IGQzLmV2ZW50Lng7CiAgICBkLmZ5ID0gZDMuZXZlbnQueTsKfQoKZnVuY3Rpb24gZHJhZ2VuZGVkKGQpIHsKICAgIGlmICghZDMuZXZlbnQuYWN0aXZlKSBzaW11bGF0aW9uLmFscGhhVGFyZ2V0KDApOwogICAgZC5meCA9IG51bGw7CiAgICBkLmZ5ID0gbnVsbDsKfQoqLwpmdW5jdGlvbiBjaGVja19lcXVhbDEocGxhY2Upe3JldHVybiBwbGFjZS50b1N0cmluZygpPT1wbGFjZTF9CmZ1bmN0aW9uIGNoZWNrX2VxdWFsMihwbGFjZSl7cmV0dXJuIHBsYWNlLnRvU3RyaW5nKCk9PXBsYWNlMn0KfSwKc2VsZWN0X25ld19wb2ludCgpewogIHZhciBkYXRhID0gdGhpcy5IaXN0X3NlbGVjdF9kYXRhCiAgdGhpcy5ub2RlRWxlbWVudHMuYXR0cignZmlsbCcsZnVuY3Rpb24oZCl7cmV0dXJuIGlzU2VsZWN0ZWRCeUhpc3QoZCxkYXRhKQpmdW5jdGlvbiBpc1NlbGVjdGVkQnlIaXN0KGEsZGF0YSl7CiAgZm9yKHZhciBpPTAsbGVuPWRhdGEubGVuZ3RoO2k8bGVuO2krKyl7CiAgICB2YXIgcGxhY2UgPSBkYXRhW2ldLnByb3BlcnRpZXMubmFtZQogICAgICBpZihhLm5hbWU9PXBsYWNlKXsKICAgICAgICByZXR1cm4gJ29yYW5nZSd9CiAgICB9CiAgICByZXR1cm4gIiM2NDk1RUQiCiAgfQoKfSkKfSwKR2V0X1ByZWRpY3QocHJlZGljdF9hbGwpewogIEJ1cy4kb24oJ0JydXNoX3VwZGF0ZScsKHZhbCkgPT4gewogICAgaWYodmFsPT0nZmluc2loJyl7CiAgdGhpcy5nMV81LnNlbGVjdEFsbCgiKiIpLnJlbW92ZSgpCiAgZm9yKHZhciBpIGluIHByZWRpY3RfYWxsKXsKICAgIHZhciBwcmVkaWN0ID0gcHJlZGljdF9hbGxbaV0KICAgIHZhciBwb3NpdGlvbiA9IHByZWRpY3RbJ0JlaGF2aW9yJ10KICAgIGlmIChwcmVkaWN0Wyd0eXBlJ109PSdDbGljaycpewogICAgaWYocHJlZGljdFsnT2JqZWN0X1ZpZXcnXT09J0ZvcmNlJyl7CiAgICB2YXIgeF9wb3NpdGlvbiA9IHBvc2l0aW9uWyd4X3Bvc2l0aW9uJ10KICAgIHZhciB5X3Bvc2l0aW9uID0gcG9zaXRpb25bJ3lfcG9zaXRpb24nXQogICAgdmFyIGRpc3QgPSAwCiAgICB2YXIgbWluX2Rpc3QgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkKICAgIHZhciBkaXNzID0gMAogICAgZm9yKGkgaW4gdGhpcy52ZXJ0aWNlcyl7CiAgICAgIHZhciBkID0gdGhpcy52ZXJ0aWNlc1tpXQogICAgICBkaXN0ID0gKHhfcG9zaXRpb24tZFswXSkqKjIrKHlfcG9zaXRpb24tZFsxXSkqKjIKICAgICAgaWYgKGRpc3Q8bWluX2Rpc3QpewogICAgICAgIGRpc3MgPSBkCiAgICAgICAgbWluX2Rpc3QgPSBkaXN0CiAgICAgIH0KICAgIH0KICAgIHRoaXMuZzFfNS5hcHBlbmQoJ2NpcmNsZScpCiAgLmF0dHIoJ2N4JywgZGlzc1swXSkKICAuYXR0cignY3knLCBkaXNzWzFdKQogIC5hdHRyKCdyJywgMTApCiAgLmF0dHIoJ2ZpbGwnLCdyZWQnKQogIC5hdHRyKCJvcGFjaXR5IiwxKTt9fQp9CgogICAgfQogIH0pLAogIEJ1cy4kb24oJ0ZvcmNlX3NlbGVjdF9kYXRhJywoKSA9PiB7IAogIHRoaXMuZzFfNS5zZWxlY3RBbGwoIioiKS5yZW1vdmUoKQogIGZvcih2YXIgaSBpbiBwcmVkaWN0X2FsbCl7CiAgICB2YXIgcHJlZGljdCA9IHByZWRpY3RfYWxsW2ldCiAgICB2YXIgcG9zaXRpb24gPSBwcmVkaWN0WydCZWhhdmlvciddCiAgICBpZiAocHJlZGljdFsndHlwZSddPT0nQ2xpY2snKXsKICAgIGlmKHByZWRpY3RbJ09iamVjdF9WaWV3J109PSdGb3JjZScpewogICAgdmFyIHhfcG9zaXRpb24gPSBwb3NpdGlvblsneF9wb3NpdGlvbiddCiAgICB2YXIgeV9wb3NpdGlvbiA9IHBvc2l0aW9uWyd5X3Bvc2l0aW9uJ10KICAgIHZhciBkaXN0ID0gMAogICAgdmFyIG1pbl9kaXN0ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZCiAgICB2YXIgZGlzcyA9IDAKICAgIGZvcihpIGluIHRoaXMudmVydGljZXMpewogICAgICB2YXIgZCA9IHRoaXMudmVydGljZXNbaV0KICAgICAgZGlzdCA9ICh4X3Bvc2l0aW9uLWRbMF0pKioyKyh5X3Bvc2l0aW9uLWRbMV0pKioyCiAgICAgIGlmIChkaXN0PG1pbl9kaXN0KXsKICAgICAgICBkaXNzID0gZAogICAgICAgIG1pbl9kaXN0ID0gZGlzdAogICAgICB9CiAgICB9CiAgICB0aGlzLmcxXzUuYXBwZW5kKCdjaXJjbGUnKQogIC5hdHRyKCdjeCcsIGRpc3NbMF0pCiAgLmF0dHIoJ2N5JywgZGlzc1sxXSkKICAuYXR0cigncicsIDEwKQogIC5hdHRyKCdmaWxsJywncmVkJykKICAuYXR0cigib3BhY2l0eSIsMSk7fX0KfQoKICB9CgogICkKfQp9Cn0K"},{"version":3,"sources":["Force.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA","file":"Force.vue","sourceRoot":"src/components","sourcesContent":["/* eslint-disable */s\n<template>\n  <div id=\"force\">\n    <p>\n      <h4>  Places connection</h4>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\n//import * as topojson from \"topojson\"\nimport Bus from '../assets/bus.js';\n\nexport default {\n  name: \"App\",\n  data(){\n    return{\n      data:undefined,\n      place:[],\n      all_places:{},\n      svg2:undefined,\n      width2 :undefined,\n      height2 : undefined,\n      Hist_select_data:'',\n      nodeElements:undefined,\n      vertices:''\n    }\n  },\n  mounted() {\n    this.handle()\n  },\n  methods: {\n    handle: function () {\n    Bus.$on(\"Start_Place\", () => {\n                this.generateForce()\n              }),  \n    Bus.$on(\"Map_select_data\", (val) => {\n                this.data = val\n                this.updateForce()\n              }),\n    Bus.$on(\"Hist_select_data\", (val) => {\n                this.Hist_select_data = val\n                this.select_new_point()\n              })\n    Bus.$on(\"Get_Predict\",(val) => {this.Get_Predict(val)})\n  },\n    generateForce() {\nvar data_place = []\nvar width2 = 400,\n    height2 = 285;\nthis.width2 = width2\nthis.height2 = height2\nconst svg2 = d3.select(\"#force\").append(\"svg\")\n\n  svg2.attr(\"width\", width2)\n    .attr(\"height\", height2);\n\n// center marker\nsvg2.append('circle')\n    .attr('r', 3)\n    .attr('cx', width2 / 2)\n    .attr('cy', height2 / 2);\nthis.svg2 = svg2\nlet self = this\n/*\nd3.json(\"sushi_map.json\", function(error, point) {\n  const places_all = topojson.feature(point, point.objects.places)\n*/\nvar places_all = self.GLOBAL.place_now\nvar nodes = []\nvar links=[]\n    for(var i=0, len=data_place.length;i<len;i++){\n        nodes.push({\"name\":data_place[i]})\n      }\n    for(i=1, len=places_all.features.length-1; i<len; i++){\n    // (note: loop until length - 1 since we're getting the next\n    //  item with i+1)\n    var place1 = places_all.features[i].properties.name.toString()\n    var place2 = places_all.features[i+1].properties.name.toString()\n    // if ((place1 in data)&&(place2 in data)){\n    var a = check_in(data_place, place1)\n    var b = check_in(data_place, place2)\n    if((a==\"TRUE\") && (b==\"TRUE\")){\n      var index1 = data_place.findIndex(check_equal1)\n      var index2 = data_place.findIndex(check_equal2)\n      links.push({\"source\": index1, \"target\": index2})\n    }\n}\nfunction check_equal1(place){return place.toString()==place1}\nfunction check_equal2(place){return place.toString()==place2}\nfunction check_in(data, place){\n  for(var i=0, len=places_all.features.length-1; i<len; i++){\n    var d = data[i]\n    if(d== place){\n      return 'TRUE'\n    }}\n  return 'False'\n}\nvar linkElements = svg2.selectAll()\n        .data(links)\n        .enter()\n        .append('line')\n        .attr('stroke', 'black')\n        .attr('stroke-width', '2px');\nself.nodeElements = svg2.selectAll()\n        .data(nodes)\n        .enter()\n        .append('circle')\n        .attr('r', 5)\n        .attr('fill', 'red')\n\nvar textElements = svg2.selectAll()\n  .data(nodes)\n  .enter().append('text')\n    .text(node => node.name)\n    .attr('font-size', 15)\n    .attr('dx', 15)\n    .attr('dy', 4)\nconst simulation = d3.forceSimulation()\n          .force('link', d3.forceLink().distance(80))\n          .force('charge', d3.forceManyBody())\n          .force('center', d3.forceCenter(width2 / 2, height2 / 2));\n\nsimulation\n    .nodes(nodes)\n    .on('tick', () => {\n  linkElements\n        .attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y)\n  self.nodeElements\n    .attr('cx', node => node.x)\n    .attr('cy', node => node.y)\n  textElements\n    .attr('x', node => node.x)\n    .attr('y', node => node.y)\n})\n\nsimulation\n    .force('link')\n    .links(links);\n/*\nfunction dragstarted(d) {\n    if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n}\n\nfunction dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n}\n\nfunction dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n}\n*/\n},\nupdateForce(){\n\n  let self = this\nfunction unique(arr) {\n    return arr.filter(function(item, index, arr) {\n      // 取出元素, 该元素在数组中第一次出现的索引 === 当前索引值\n      return arr.indexOf(item, 0) === index;\n    });\n}\nfunction countTimes(data) {\n    return data.reduce(function(time, name) {\n        if (name in time) {\n            time[name]++;\n        } else {\n            time[name] = 1;\n        }\n        return time;\n    }, {});\n}\n\nvar data_select = []\nvar data_select1 = []\nvar place_count = []\nfor(var i=0, len=this.data.length-1; i<len; i++){\n  var d = this.data[i]\n  data_select1.push(d.properties.name.toString())}\n  data_select = unique(data_select1)\n  place_count = countTimes(data_select1)\nvar max_count = 0\nfor(i in place_count){\n  var item = place_count[i];\n  if (item>max_count){\n    max_count = item\n  }\n}\n  var height2 = this.height2\n  var width2 = this.width2\n  var svg2 = this.svg2\n  var places_all = self.GLOBAL.place_now\n  svg2.selectAll(\"*\").remove();\n  this.g1_5 = svg2.append(\"g\").attr(\"id\",\"for_interaction_suggestion\"); \n  svg2.append('circle')\n    .attr('r', 5)\n    .attr('cx', width2 / 2)\n    .attr('cy', height2 / 2);\nvar nodes = []\nvar links=[]\n    for(i=0, len=data_select.length;i<len;i++){\n        nodes.push({\"name\":data_select[i]})\n      }\n    for(i=1, len=places_all.features.length-1; i<len; i++){\n    // (note: loop until length - 1 since we're getting the next\n    //  item with i+1)\n    var place1 = places_all.features[i].properties.name.toString()\n    var place2 = places_all.features[i+1].properties.name.toString()\n    // if ((place1 in data)&&(place2 in data)){\n    var a = check_in(data_select, place1)\n    var b = check_in(data_select, place2)\n    if((a==\"TRUE\") && (b==\"TRUE\")){\n      var index1 = data_select.findIndex(check_equal1)\n      var index2 = data_select.findIndex(check_equal2)\n      links.push({\"source\": index1, \"target\": index2})\n    }}\nfunction check_in(data, place){\n  for(var i=0, len=places_all.features.length-1; i<len; i++){\n    var d = data[i]\n    if(d== place){\n      return 'TRUE'\n    }}\n  return 'False'\n}\nvar visited = []\n//var select_place_from_force = []\nvar linkElements = svg2.selectAll()\n        .data(links)\n        .enter()\n        .append('line')\n        .attr('stroke', 'black')\n        .attr('stroke-width', '2px');\nself.nodeElements = svg2.selectAll()\n        .data(nodes)\n        .enter()\n        .append('circle')\n        .attr('r', function(node){return 8*(place_count[node.name]+4)/(5+max_count)})\n        .attr('id', function(node){return node.name})\n        .attr('fill', '#6495ED')\n        .on('mouseover',function(){var that = this\n          d3.select(that).attr(\"fill\",'orange')\n          self.GLOBAL.New_time = new Date().getTime()/1000\n          if((self.GLOBAL.New_time-self.GLOBAL.Old_time)>1){\n          visited.push(that)\n          self.GLOBAL.Visual_state['Force']['visited'] = visited\n          Bus.$emit(\"change\", self.GLOBAL.Visual_state)\n          self.GLOBAL.Log_file.push(['timestamp',self.GLOBAL.New_time,'hover-force-position',d3.mouse(this),that.id,'\\n'])\n          self.postInteraction({'name':self.GLOBAL.Log_file})\n          self.GLOBAL.Old_time = self.GLOBAL.New_time}\n          Bus.$emit(\"Force_select_data\", that.id)})\n        .on('mouseout', function(){return self.nodeElements.attr('fill', '#6495ED')})\n\n\nvar textElements = svg2.selectAll()\n  .data(nodes)\n  .enter().append('text')\n    .text(node => node.name)\n    .attr('font-size', 13)\n    .attr('dx', 8)\n    .attr('dy', 4)\n\nconst simulation = d3.forceSimulation()\n          .force('link', d3.forceLink().distance(50))\n          .force('charge', d3.forceManyBody(-100))\n          .force('center', d3.forceCenter(width2 / 2, height2 / 2));\nBus.$emit('Brush_update','start')\nsimulation\n    .nodes(nodes)\n    .on('tick', () => {\n  linkElements\n        .attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y)\n  self.nodeElements\n    .attr('cx', function(d){return d.x = Math.max(5,Math.min(self.width2-4,d.x))})\n    .attr('cy', function(d){return d.y = Math.max(5,Math.min(self.height2-4,d.y))})\n  textElements\n    .attr('x', node => node.x)\n    .attr('y', node => node.y)\n})\n    .on('end',() => {\n      visited = []\n      var se = []\n      var vertices = []\nfor (i = 0, len = nodes.length; i < len; i++) {\n  var d =nodes[i]\n  se.push({'coordinates':[d.x,d.y],'r':8*(place_count[d.name]+4)/(5+max_count),'name':d.name})\n  vertices.push([d.x,d.y])\n}\nself.vertices = vertices\nBus.$emit('Brush_update','finsih')\nself.GLOBAL.Force_state.push({'Force':se})\nself.GLOBAL.Visual_state['Force']['overall'] = se\nself.GLOBAL.Visual_state['Force']['visit'] = []\nBus.$emit(\"change\", self.GLOBAL.Visual_state)\n    })\n\nsimulation\n    .force('link')\n    .links(links);\n\n\n/*\nconsole.log(nodes[1])\nconsole.log(self.nodeElements)\nvar se = []\nfor (i = 0, len = self.nodeElements._groups.length; i < len; i++) {\n  var d =self.nodeElements._groups[0][i].__data__\n  console.log(i,d,d.x,d.id)\n  se.push({'coordinates':[d.x,d.y],'r':8*(place_count[d.name]+4)/(5+max_count),'name':d.name})\n}\nself.GLOBAL.Visual_state.push({'Force':se})\nconsole.log(self.GLOBAL.Visual_state)\n\nfunction dragstarted(d) {\n    if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n}\n\nfunction dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n}\n\nfunction dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n}\n*/\nfunction check_equal1(place){return place.toString()==place1}\nfunction check_equal2(place){return place.toString()==place2}\n},\nselect_new_point(){\n  var data = this.Hist_select_data\n  this.nodeElements.attr('fill',function(d){return isSelectedByHist(d,data)\nfunction isSelectedByHist(a,data){\n  for(var i=0,len=data.length;i<len;i++){\n    var place = data[i].properties.name\n      if(a.name==place){\n        return 'orange'}\n    }\n    return \"#6495ED\"\n  }\n\n})\n},\nGet_Predict(predict_all){\n  Bus.$on('Brush_update',(val) => {\n    if(val=='finsih'){\n  this.g1_5.selectAll(\"*\").remove()\n  for(var i in predict_all){\n    var predict = predict_all[i]\n    var position = predict['Behavior']\n    if (predict['type']=='Click'){\n    if(predict['Object_View']=='Force'){\n    var x_position = position['x_position']\n    var y_position = position['y_position']\n    var dist = 0\n    var min_dist = Number.POSITIVE_INFINITY\n    var diss = 0\n    for(i in this.vertices){\n      var d = this.vertices[i]\n      dist = (x_position-d[0])**2+(y_position-d[1])**2\n      if (dist<min_dist){\n        diss = d\n        min_dist = dist\n      }\n    }\n    this.g1_5.append('circle')\n  .attr('cx', diss[0])\n  .attr('cy', diss[1])\n  .attr('r', 10)\n  .attr('fill','red')\n  .attr(\"opacity\",1);}}\n}\n\n    }\n  }),\n  Bus.$on('Force_select_data',() => { \n  this.g1_5.selectAll(\"*\").remove()\n  for(var i in predict_all){\n    var predict = predict_all[i]\n    var position = predict['Behavior']\n    if (predict['type']=='Click'){\n    if(predict['Object_View']=='Force'){\n    var x_position = position['x_position']\n    var y_position = position['y_position']\n    var dist = 0\n    var min_dist = Number.POSITIVE_INFINITY\n    var diss = 0\n    for(i in this.vertices){\n      var d = this.vertices[i]\n      dist = (x_position-d[0])**2+(y_position-d[1])**2\n      if (dist<min_dist){\n        diss = d\n        min_dist = dist\n      }\n    }\n    this.g1_5.append('circle')\n  .attr('cx', diss[0])\n  .attr('cy', diss[1])\n  .attr('r', 10)\n  .attr('fill','red')\n  .attr(\"opacity\",1);}}\n}\n\n  }\n\n  )\n}\n}\n}\n</script>\n\n<style>\n\n.selected{\n  fill: yellow;\n}"]}]}