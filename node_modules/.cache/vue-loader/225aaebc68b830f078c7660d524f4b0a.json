{"remainingRequest":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/src/components/Force.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/src/components/Force.vue","mtime":1614674306967},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/study/大四上/Vis/vue_practice/museum_vis/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKaW1wb3J0ICogYXMgdG9wb2pzb24gZnJvbSAidG9wb2pzb24iCmltcG9ydCBCdXMgZnJvbSAnLi4vYXNzZXRzL2J1cy5qcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFwcCIsCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICBkYXRhOnVuZGVmaW5lZCwKICAgICAgcGxhY2U6W10sCiAgICAgIGFsbF9wbGFjZXM6e30sCiAgICAgIHN2ZzI6dW5kZWZpbmVkLAogICAgICB3aWR0aDIgOnVuZGVmaW5lZCwKICAgICAgaGVpZ2h0MiA6IHVuZGVmaW5lZCwKICAgICAgSGlzdF9zZWxlY3RfZGF0YTonJywKICAgICAgbm9kZUVsZW1lbnRzOnVuZGVmaW5lZAogICAgfQogIH0sCiAgLy9jcmVhdGVkKCl7CiAgICAvL0J1cy4kb24oIk1hcF9wbGFjZSIsICh2YWwpID0+IHsKICAgICAgICAgICAgICAgIC8vdGhpcy5wbGFjZSA9IHZhbDt9KSwKICAgIC8vQnVzLiRvbigiTWFwX3BsYWNlcyIsICh2YWwpID0+IHsKICAgICAgICAgICAgICAgIC8vdGhpcy5wbGFjZXMgPSB2YWw7fSl9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdlbmVyYXRlRm9yY2UoKQogICAgdGhpcy5oYW5kbGUoKQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlOiBmdW5jdGlvbiAoKSB7CiAgICBCdXMuJG9uKCJNYXBfc2VsZWN0X2RhdGEiLCAodmFsKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB2YWwKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRm9yY2UoKQogICAgICAgICAgICAgIH0pLAogICAgQnVzLiRvbigiSGlzdF9zZWxlY3RfZGF0YSIsICh2YWwpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuSGlzdF9zZWxlY3RfZGF0YSA9IHZhbAogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RfbmV3X3BvaW50KCkKICAgICAgICAgICAgICB9KQogIH0sCiAgICBnZW5lcmF0ZUZvcmNlKCkgewp2YXIgZGF0YV9wbGFjZSA9IFtdCnZhciB3aWR0aDIgPSAzMjAsCiAgICBoZWlnaHQyID0gMzAwOwp0aGlzLndpZHRoMiA9IHdpZHRoMgp0aGlzLmhlaWdodDIgPSBoZWlnaHQyCmNvbnN0IHN2ZzIgPSBkMy5zZWxlY3QoIiNmb3JjZSIpLmFwcGVuZCgic3ZnIikKCiAgc3ZnMi5hdHRyKCJ3aWR0aCIsIHdpZHRoMikKICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQyKTsKCi8vIGNlbnRlciBtYXJrZXIKc3ZnMi5hcHBlbmQoJ2NpcmNsZScpCiAgICAuYXR0cigncicsIDMpCiAgICAuYXR0cignY3gnLCB3aWR0aDIgLyAyKQogICAgLmF0dHIoJ2N5JywgaGVpZ2h0MiAvIDIpOwp0aGlzLnN2ZzIgPSBzdmcyCmxldCBzZWxmID0gdGhpcwpkMy5qc29uKCJzdXNoaV9tYXAuanNvbiIsIGZ1bmN0aW9uKGVycm9yLCBwb2ludCkgewogIGNvbnN0IHBsYWNlc19hbGwgPSB0b3BvanNvbi5mZWF0dXJlKHBvaW50LCBwb2ludC5vYmplY3RzLnBsYWNlcykKCnZhciBub2RlcyA9IFtdCnZhciBsaW5rcz1bXQogICAgZm9yKHZhciBpPTAsIGxlbj1kYXRhX3BsYWNlLmxlbmd0aDtpPGxlbjtpKyspewogICAgICAgIG5vZGVzLnB1c2goeyJuYW1lIjpkYXRhX3BsYWNlW2ldfSkKICAgICAgfQogICAgZm9yKGk9MSwgbGVuPXBsYWNlc19hbGwuZmVhdHVyZXMubGVuZ3RoLTE7IGk8bGVuOyBpKyspewogICAgLy8gKG5vdGU6IGxvb3AgdW50aWwgbGVuZ3RoIC0gMSBzaW5jZSB3ZSdyZSBnZXR0aW5nIHRoZSBuZXh0CiAgICAvLyAgaXRlbSB3aXRoIGkrMSkKICAgIHZhciBwbGFjZTEgPSBwbGFjZXNfYWxsLmZlYXR1cmVzW2ldLnByb3BlcnRpZXMubmFtZS50b1N0cmluZygpCiAgICB2YXIgcGxhY2UyID0gcGxhY2VzX2FsbC5mZWF0dXJlc1tpKzFdLnByb3BlcnRpZXMubmFtZS50b1N0cmluZygpCiAgICAvLyBpZiAoKHBsYWNlMSBpbiBkYXRhKSYmKHBsYWNlMiBpbiBkYXRhKSl7CiAgICB2YXIgYSA9IGNoZWNrX2luKGRhdGFfcGxhY2UsIHBsYWNlMSkKICAgIHZhciBiID0gY2hlY2tfaW4oZGF0YV9wbGFjZSwgcGxhY2UyKQogICAgaWYoKGE9PSJUUlVFIikgJiYgKGI9PSJUUlVFIikpewogICAgICB2YXIgaW5kZXgxID0gZGF0YV9wbGFjZS5maW5kSW5kZXgoY2hlY2tfZXF1YWwxKQogICAgICB2YXIgaW5kZXgyID0gZGF0YV9wbGFjZS5maW5kSW5kZXgoY2hlY2tfZXF1YWwyKQogICAgICBsaW5rcy5wdXNoKHsic291cmNlIjogaW5kZXgxLCAidGFyZ2V0IjogaW5kZXgyfSkKICAgIH0KfQpmdW5jdGlvbiBjaGVja19lcXVhbDEocGxhY2Upe3JldHVybiBwbGFjZS50b1N0cmluZygpPT1wbGFjZTF9CmZ1bmN0aW9uIGNoZWNrX2VxdWFsMihwbGFjZSl7cmV0dXJuIHBsYWNlLnRvU3RyaW5nKCk9PXBsYWNlMn0KZnVuY3Rpb24gY2hlY2tfaW4oZGF0YSwgcGxhY2UpewogIGZvcih2YXIgaT0wLCBsZW49cGxhY2VzX2FsbC5mZWF0dXJlcy5sZW5ndGgtMTsgaTxsZW47IGkrKyl7CiAgICB2YXIgZCA9IGRhdGFbaV0KICAgIGlmKGQ9PSBwbGFjZSl7CiAgICAgIHJldHVybiAnVFJVRScKICAgIH19CiAgcmV0dXJuICdGYWxzZScKfQp2YXIgbGlua0VsZW1lbnRzID0gc3ZnMi5zZWxlY3RBbGwoKQogICAgICAgIC5kYXRhKGxpbmtzKQogICAgICAgIC5lbnRlcigpCiAgICAgICAgLmFwcGVuZCgnbGluZScpCiAgICAgICAgLmF0dHIoJ3N0cm9rZScsICdibGFjaycpCiAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsICcycHgnKTsKc2VsZi5ub2RlRWxlbWVudHMgPSBzdmcyLnNlbGVjdEFsbCgpCiAgICAgICAgLmRhdGEobm9kZXMpCiAgICAgICAgLmVudGVyKCkKICAgICAgICAuYXBwZW5kKCdjaXJjbGUnKQogICAgICAgIC5hdHRyKCdyJywgNSkKICAgICAgICAuYXR0cignZmlsbCcsICdyZWQnKQogICAgICAgIC5jYWxsKGQzLmRyYWcoKQogICAgICAgICAgICAgIC5vbignc3RhcnQnLCBkcmFnc3RhcnRlZCkKICAgICAgICAgICAgICAub24oJ2RyYWcnLCBkcmFnZ2VkKQogICAgICAgICAgICAgIC5vbignZW5kJywgZHJhZ2VuZGVkKSk7CnZhciB0ZXh0RWxlbWVudHMgPSBzdmcyLnNlbGVjdEFsbCgpCiAgLmRhdGEobm9kZXMpCiAgLmVudGVyKCkuYXBwZW5kKCd0ZXh0JykKICAgIC50ZXh0KG5vZGUgPT4gbm9kZS5uYW1lKQogICAgLmF0dHIoJ2ZvbnQtc2l6ZScsIDE1KQogICAgLmF0dHIoJ2R4JywgMTUpCiAgICAuYXR0cignZHknLCA0KQpjb25zdCBzaW11bGF0aW9uID0gZDMuZm9yY2VTaW11bGF0aW9uKCkKICAgICAgICAgIC5mb3JjZSgnbGluaycsIGQzLmZvcmNlTGluaygpLmRpc3RhbmNlKDYwKSkKICAgICAgICAgIC5mb3JjZSgnY2hhcmdlJywgZDMuZm9yY2VNYW55Qm9keSgpKQogICAgICAgICAgLmZvcmNlKCdjZW50ZXInLCBkMy5mb3JjZUNlbnRlcih3aWR0aDIgLyAyLCBoZWlnaHQyIC8gMikpOwoKc2ltdWxhdGlvbgogICAgLm5vZGVzKG5vZGVzKQogICAgLm9uKCd0aWNrJywgKCkgPT4gewogIGxpbmtFbGVtZW50cwogICAgICAgIC5hdHRyKCd4MScsIGQgPT4gZC5zb3VyY2UueCkKICAgICAgICAuYXR0cigneTEnLCBkID0+IGQuc291cmNlLnkpCiAgICAgICAgLmF0dHIoJ3gyJywgZCA9PiBkLnRhcmdldC54KQogICAgICAgIC5hdHRyKCd5MicsIGQgPT4gZC50YXJnZXQueSkKICBzZWxmLm5vZGVFbGVtZW50cwogICAgLmF0dHIoJ2N4Jywgbm9kZSA9PiBub2RlLngpCiAgICAuYXR0cignY3knLCBub2RlID0+IG5vZGUueSkKICB0ZXh0RWxlbWVudHMKICAgIC5hdHRyKCd4Jywgbm9kZSA9PiBub2RlLngpCiAgICAuYXR0cigneScsIG5vZGUgPT4gbm9kZS55KQp9KQoKc2ltdWxhdGlvbgogICAgLmZvcmNlKCdsaW5rJykKICAgIC5saW5rcyhsaW5rcyk7CgpmdW5jdGlvbiBkcmFnc3RhcnRlZChkKSB7CiAgICBpZiAoIWQzLmV2ZW50LmFjdGl2ZSkgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwLjMpLnJlc3RhcnQoKTsKICAgIGQuZnggPSBkLng7CiAgICBkLmZ5ID0gZC55Owp9CgpmdW5jdGlvbiBkcmFnZ2VkKGQpIHsKICAgIGQuZnggPSBkMy5ldmVudC54OwogICAgZC5meSA9IGQzLmV2ZW50Lnk7Cn0KCmZ1bmN0aW9uIGRyYWdlbmRlZChkKSB7CiAgICBpZiAoIWQzLmV2ZW50LmFjdGl2ZSkgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwKTsKICAgIGQuZnggPSBudWxsOwogICAgZC5meSA9IG51bGw7Cn0KfSl9LAp1cGRhdGVGb3JjZSgpewogIGxldCBzZWxmID0gdGhpcwpmdW5jdGlvbiB1bmlxdWUoYXJyKSB7CiAgICByZXR1cm4gYXJyLmZpbHRlcihmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyKSB7CiAgICAgIC8vIOWPluWHuuWFg+e0oCwg6K+l5YWD57Sg5Zyo5pWw57uE5Lit56ys5LiA5qyh5Ye6546w55qE57Si5byVID09PSDlvZPliY3ntKLlvJXlgLwKICAgICAgcmV0dXJuIGFyci5pbmRleE9mKGl0ZW0sIDApID09PSBpbmRleDsKICAgIH0pOwp9CmZ1bmN0aW9uIGNvdW50VGltZXMoZGF0YSkgewogICAgcmV0dXJuIGRhdGEucmVkdWNlKGZ1bmN0aW9uKHRpbWUsIG5hbWUpIHsKICAgICAgICBpZiAobmFtZSBpbiB0aW1lKSB7CiAgICAgICAgICAgIHRpbWVbbmFtZV0rKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aW1lW25hbWVdID0gMTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRpbWU7CiAgICB9LCB7fSk7Cn0KCnZhciBkYXRhX3NlbGVjdCA9IFtdCnZhciBkYXRhX3NlbGVjdDEgPSBbXQp2YXIgcGxhY2VfY291bnQgPSBbXQpmb3IodmFyIGk9MCwgbGVuPXRoaXMuZGF0YS5sZW5ndGgtMTsgaTxsZW47IGkrKyl7CiAgdmFyIGQgPSB0aGlzLmRhdGFbaV0KICBkYXRhX3NlbGVjdDEucHVzaChkLnByb3BlcnRpZXMubmFtZS50b1N0cmluZygpKX0KICBkYXRhX3NlbGVjdCA9IHVuaXF1ZShkYXRhX3NlbGVjdDEpCiAgcGxhY2VfY291bnQgPSBjb3VudFRpbWVzKGRhdGFfc2VsZWN0MSkKdmFyIG1heF9jb3VudCA9IDAKZm9yKGkgaW4gcGxhY2VfY291bnQpewogIHZhciBpdGVtID0gcGxhY2VfY291bnRbaV07CiAgaWYgKGl0ZW0+bWF4X2NvdW50KXsKICAgIG1heF9jb3VudCA9IGl0ZW0KICB9Cn0KICB2YXIgaGVpZ2h0MiA9IHRoaXMuaGVpZ2h0MgogIHZhciB3aWR0aDIgPSB0aGlzLndpZHRoMgogIHZhciBzdmcyID0gdGhpcy5zdmcyCmQzLmpzb24oInN1c2hpX21hcC5qc29uIiwgZnVuY3Rpb24oZXJyb3IsIHBvaW50KSB7CiAgY29uc3QgcGxhY2VzX2FsbCA9IHRvcG9qc29uLmZlYXR1cmUocG9pbnQsIHBvaW50Lm9iamVjdHMucGxhY2VzKQoKICBzdmcyLnNlbGVjdEFsbCgiKiIpLnJlbW92ZSgpOwogIHN2ZzIuYXBwZW5kKCdjaXJjbGUnKQogICAgLmF0dHIoJ3InLCA1KQogICAgLmF0dHIoJ2N4Jywgd2lkdGgyIC8gMikKICAgIC5hdHRyKCdjeScsIGhlaWdodDIgLyAyKTsKdmFyIG5vZGVzID0gW10KdmFyIGxpbmtzPVtdCiAgICBmb3IodmFyIGk9MCwgbGVuPWRhdGFfc2VsZWN0Lmxlbmd0aDtpPGxlbjtpKyspewogICAgICAgIG5vZGVzLnB1c2goeyJuYW1lIjpkYXRhX3NlbGVjdFtpXX0pCiAgICAgIH0KICAgIGZvcihpPTEsIGxlbj1wbGFjZXNfYWxsLmZlYXR1cmVzLmxlbmd0aC0xOyBpPGxlbjsgaSsrKXsKICAgIC8vIChub3RlOiBsb29wIHVudGlsIGxlbmd0aCAtIDEgc2luY2Ugd2UncmUgZ2V0dGluZyB0aGUgbmV4dAogICAgLy8gIGl0ZW0gd2l0aCBpKzEpCiAgICB2YXIgcGxhY2UxID0gcGxhY2VzX2FsbC5mZWF0dXJlc1tpXS5wcm9wZXJ0aWVzLm5hbWUudG9TdHJpbmcoKQogICAgdmFyIHBsYWNlMiA9IHBsYWNlc19hbGwuZmVhdHVyZXNbaSsxXS5wcm9wZXJ0aWVzLm5hbWUudG9TdHJpbmcoKQogICAgLy8gaWYgKChwbGFjZTEgaW4gZGF0YSkmJihwbGFjZTIgaW4gZGF0YSkpewogICAgdmFyIGEgPSBjaGVja19pbihkYXRhX3NlbGVjdCwgcGxhY2UxKQogICAgdmFyIGIgPSBjaGVja19pbihkYXRhX3NlbGVjdCwgcGxhY2UyKQogICAgaWYoKGE9PSJUUlVFIikgJiYgKGI9PSJUUlVFIikpewogICAgICB2YXIgaW5kZXgxID0gZGF0YV9zZWxlY3QuZmluZEluZGV4KGNoZWNrX2VxdWFsMSkKICAgICAgdmFyIGluZGV4MiA9IGRhdGFfc2VsZWN0LmZpbmRJbmRleChjaGVja19lcXVhbDIpCiAgICAgIGxpbmtzLnB1c2goeyJzb3VyY2UiOiBpbmRleDEsICJ0YXJnZXQiOiBpbmRleDJ9KQogICAgfX0KZnVuY3Rpb24gY2hlY2tfaW4oZGF0YSwgcGxhY2UpewogIGZvcih2YXIgaT0wLCBsZW49cGxhY2VzX2FsbC5mZWF0dXJlcy5sZW5ndGgtMTsgaTxsZW47IGkrKyl7CiAgICB2YXIgZCA9IGRhdGFbaV0KICAgIGlmKGQ9PSBwbGFjZSl7CiAgICAgIHJldHVybiAnVFJVRScKICAgIH19CiAgcmV0dXJuICdGYWxzZScKfQovL3ZhciBzZWxlY3RfcGxhY2VfZnJvbV9mb3JjZSA9IFtdCnZhciBsaW5rRWxlbWVudHMgPSBzdmcyLnNlbGVjdEFsbCgpCiAgICAgICAgLmRhdGEobGlua3MpCiAgICAgICAgLmVudGVyKCkKICAgICAgICAuYXBwZW5kKCdsaW5lJykKICAgICAgICAuYXR0cignc3Ryb2tlJywgJ2JsYWNrJykKICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgJzJweCcpOwpzZWxmLm5vZGVFbGVtZW50cyA9IHN2ZzIuc2VsZWN0QWxsKCkKICAgICAgICAuZGF0YShub2RlcykKICAgICAgICAuZW50ZXIoKQogICAgICAgIC5hcHBlbmQoJ2NpcmNsZScpCiAgICAgICAgLmF0dHIoJ3InLCBmdW5jdGlvbihub2RlKXtyZXR1cm4gOCoocGxhY2VfY291bnRbbm9kZS5uYW1lXSs0KS8oNSttYXhfY291bnQpfSkKICAgICAgICAuYXR0cignaWQnLCBmdW5jdGlvbihub2RlKXtyZXR1cm4gbm9kZS5uYW1lfSkKICAgICAgICAuYXR0cignZmlsbCcsICcjNjQ5NUVEJykKICAgICAgICAub24oJ21vdXNlb3ZlcicsZnVuY3Rpb24oKXt2YXIgdGhhdCA9IHRoaXMKICAgICAgICAgIGQzLnNlbGVjdCh0aGF0KS5hdHRyKCJmaWxsIiwnI0JDOEY4RicpCiAgICAgICAgICBzZWxmLkdMT0JBTC5Mb2dfZmlsZS5wdXNoKFsndGltZXN0YW1wJyxuZXcgRGF0ZSgpLmdldFRpbWUoKS8xMDAwLCdob3Zlci1mb3JjZS1wb3NpdGlvbicsZDMubW91c2UodGhpcyksdGhhdC5pZCwnXG4nXSkKICAgICAgICAgIC8qCiAgICAgICAgICBzZWxlY3RfcGxhY2VfZnJvbV9mb3JjZS5wdXNoKHRoYXQuaWQpCiAgICAgICAgICBjb25zb2xlLmxvZyhzZWxlY3RfcGxhY2VfZnJvbV9mb3JjZSkKICAgICAgICAgICovCiAgICAgICAgICBCdXMuJGVtaXQoIkZvcmNlX3NlbGVjdF9kYXRhIiwgdGhhdC5pZCl9KQogICAgICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbigpe3JldHVybiBzZWxmLm5vZGVFbGVtZW50cy5hdHRyKCdmaWxsJywgJyM2NDk1RUQnKX0pCiAgICAgICAgLmNhbGwoZDMuZHJhZygpCiAgICAgICAgICAgICAgLm9uKCdzdGFydCcsIGRyYWdzdGFydGVkKQogICAgICAgICAgICAgIC5vbignZHJhZycsIGRyYWdnZWQpCiAgICAgICAgICAgICAgLm9uKCdlbmQnLCBkcmFnZW5kZWQpKTsKdmFyIHRleHRFbGVtZW50cyA9IHN2ZzIuc2VsZWN0QWxsKCkKICAuZGF0YShub2RlcykKICAuZW50ZXIoKS5hcHBlbmQoJ3RleHQnKQogICAgLnRleHQobm9kZSA9PiBub2RlLm5hbWUpCiAgICAuYXR0cignZm9udC1zaXplJywgMTApCiAgICAuYXR0cignZHgnLCA4KQogICAgLmF0dHIoJ2R5JywgNCkKCmNvbnN0IHNpbXVsYXRpb24gPSBkMy5mb3JjZVNpbXVsYXRpb24oKQogICAgICAgICAgLmZvcmNlKCdsaW5rJywgZDMuZm9yY2VMaW5rKCkuZGlzdGFuY2UoMjUpKQogICAgICAgICAgLmZvcmNlKCdjaGFyZ2UnLCBkMy5mb3JjZU1hbnlCb2R5KC0xMDApKQogICAgICAgICAgLmZvcmNlKCdjZW50ZXInLCBkMy5mb3JjZUNlbnRlcih3aWR0aDIgLyAyLCBoZWlnaHQyIC8gMikpOwoKc2ltdWxhdGlvbgogICAgLm5vZGVzKG5vZGVzKQogICAgLm9uKCd0aWNrJywgKCkgPT4gewogIGxpbmtFbGVtZW50cwogICAgICAgIC5hdHRyKCd4MScsIGQgPT4gZC5zb3VyY2UueCkKICAgICAgICAuYXR0cigneTEnLCBkID0+IGQuc291cmNlLnkpCiAgICAgICAgLmF0dHIoJ3gyJywgZCA9PiBkLnRhcmdldC54KQogICAgICAgIC5hdHRyKCd5MicsIGQgPT4gZC50YXJnZXQueSkKICBzZWxmLm5vZGVFbGVtZW50cwogICAgLmF0dHIoJ2N4JywgZnVuY3Rpb24oZCl7cmV0dXJuIGQueCA9IE1hdGgubWF4KDUsTWF0aC5taW4oMjgwLGQueCkpfSkKICAgIC5hdHRyKCdjeScsIGZ1bmN0aW9uKGQpe3JldHVybiBkLnkgPSBNYXRoLm1heCg1LE1hdGgubWluKDI5MCxkLnkpKX0pCiAgdGV4dEVsZW1lbnRzCiAgICAuYXR0cigneCcsIG5vZGUgPT4gbm9kZS54KQogICAgLmF0dHIoJ3knLCBub2RlID0+IG5vZGUueSkKfSkKCnNpbXVsYXRpb24KICAgIC5mb3JjZSgnbGluaycpCiAgICAubGlua3MobGlua3MpOwoKZnVuY3Rpb24gZHJhZ3N0YXJ0ZWQoZCkgewogICAgaWYgKCFkMy5ldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMC4zKS5yZXN0YXJ0KCk7CiAgICBkLmZ4ID0gZC54OwogICAgZC5meSA9IGQueTsKfQoKZnVuY3Rpb24gZHJhZ2dlZChkKSB7CiAgICBkLmZ4ID0gZDMuZXZlbnQueDsKICAgIGQuZnkgPSBkMy5ldmVudC55Owp9CgpmdW5jdGlvbiBkcmFnZW5kZWQoZCkgewogICAgaWYgKCFkMy5ldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMCk7CiAgICBkLmZ4ID0gbnVsbDsKICAgIGQuZnkgPSBudWxsOwp9CmZ1bmN0aW9uIGNoZWNrX2VxdWFsMShwbGFjZSl7cmV0dXJuIHBsYWNlLnRvU3RyaW5nKCk9PXBsYWNlMX0KZnVuY3Rpb24gY2hlY2tfZXF1YWwyKHBsYWNlKXtyZXR1cm4gcGxhY2UudG9TdHJpbmcoKT09cGxhY2UyfX0pCn0sCnNlbGVjdF9uZXdfcG9pbnQoKXsKICB2YXIgZGF0YSA9IHRoaXMuSGlzdF9zZWxlY3RfZGF0YQogIHRoaXMubm9kZUVsZW1lbnRzLmF0dHIoJ2ZpbGwnLGZ1bmN0aW9uKGQpe3JldHVybiBpc1NlbGVjdGVkQnlIaXN0KGQsZGF0YSkKZnVuY3Rpb24gaXNTZWxlY3RlZEJ5SGlzdChhLGRhdGEpewogIGZvcih2YXIgaT0wLGxlbj1kYXRhLmxlbmd0aDtpPGxlbjtpKyspewogICAgdmFyIHBsYWNlID0gZGF0YVtpXS5wcm9wZXJ0aWVzLm5hbWUKICAgICAgaWYoYS5uYW1lPT1wbGFjZSl7CiAgICAgICAgcmV0dXJuICIjQkM4RjhGIn0KICAgIH0KICAgIHJldHVybiAiIzY0OTVFRCIKICB9Cn0pCgp9Cn19Cg=="},{"version":3,"sources":["Force.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Force.vue","sourceRoot":"src/components","sourcesContent":["/* eslint-disable */s\n<template>\n  <div id=\"force\">\n    <p>\n      <h4>Places connection</h4>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\"\nimport Bus from '../assets/bus.js';\n\nexport default {\n  name: \"App\",\n  data(){\n    return{\n      data:undefined,\n      place:[],\n      all_places:{},\n      svg2:undefined,\n      width2 :undefined,\n      height2 : undefined,\n      Hist_select_data:'',\n      nodeElements:undefined\n    }\n  },\n  //created(){\n    //Bus.$on(\"Map_place\", (val) => {\n                //this.place = val;}),\n    //Bus.$on(\"Map_places\", (val) => {\n                //this.places = val;})},\n  mounted() {\n    this.generateForce()\n    this.handle()\n  },\n  methods: {\n    handle: function () {\n    Bus.$on(\"Map_select_data\", (val) => {\n                this.data = val\n                this.updateForce()\n              }),\n    Bus.$on(\"Hist_select_data\", (val) => {\n                this.Hist_select_data = val\n                this.select_new_point()\n              })\n  },\n    generateForce() {\nvar data_place = []\nvar width2 = 320,\n    height2 = 300;\nthis.width2 = width2\nthis.height2 = height2\nconst svg2 = d3.select(\"#force\").append(\"svg\")\n\n  svg2.attr(\"width\", width2)\n    .attr(\"height\", height2);\n\n// center marker\nsvg2.append('circle')\n    .attr('r', 3)\n    .attr('cx', width2 / 2)\n    .attr('cy', height2 / 2);\nthis.svg2 = svg2\nlet self = this\nd3.json(\"sushi_map.json\", function(error, point) {\n  const places_all = topojson.feature(point, point.objects.places)\n\nvar nodes = []\nvar links=[]\n    for(var i=0, len=data_place.length;i<len;i++){\n        nodes.push({\"name\":data_place[i]})\n      }\n    for(i=1, len=places_all.features.length-1; i<len; i++){\n    // (note: loop until length - 1 since we're getting the next\n    //  item with i+1)\n    var place1 = places_all.features[i].properties.name.toString()\n    var place2 = places_all.features[i+1].properties.name.toString()\n    // if ((place1 in data)&&(place2 in data)){\n    var a = check_in(data_place, place1)\n    var b = check_in(data_place, place2)\n    if((a==\"TRUE\") && (b==\"TRUE\")){\n      var index1 = data_place.findIndex(check_equal1)\n      var index2 = data_place.findIndex(check_equal2)\n      links.push({\"source\": index1, \"target\": index2})\n    }\n}\nfunction check_equal1(place){return place.toString()==place1}\nfunction check_equal2(place){return place.toString()==place2}\nfunction check_in(data, place){\n  for(var i=0, len=places_all.features.length-1; i<len; i++){\n    var d = data[i]\n    if(d== place){\n      return 'TRUE'\n    }}\n  return 'False'\n}\nvar linkElements = svg2.selectAll()\n        .data(links)\n        .enter()\n        .append('line')\n        .attr('stroke', 'black')\n        .attr('stroke-width', '2px');\nself.nodeElements = svg2.selectAll()\n        .data(nodes)\n        .enter()\n        .append('circle')\n        .attr('r', 5)\n        .attr('fill', 'red')\n        .call(d3.drag()\n              .on('start', dragstarted)\n              .on('drag', dragged)\n              .on('end', dragended));\nvar textElements = svg2.selectAll()\n  .data(nodes)\n  .enter().append('text')\n    .text(node => node.name)\n    .attr('font-size', 15)\n    .attr('dx', 15)\n    .attr('dy', 4)\nconst simulation = d3.forceSimulation()\n          .force('link', d3.forceLink().distance(60))\n          .force('charge', d3.forceManyBody())\n          .force('center', d3.forceCenter(width2 / 2, height2 / 2));\n\nsimulation\n    .nodes(nodes)\n    .on('tick', () => {\n  linkElements\n        .attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y)\n  self.nodeElements\n    .attr('cx', node => node.x)\n    .attr('cy', node => node.y)\n  textElements\n    .attr('x', node => node.x)\n    .attr('y', node => node.y)\n})\n\nsimulation\n    .force('link')\n    .links(links);\n\nfunction dragstarted(d) {\n    if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n}\n\nfunction dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n}\n\nfunction dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n}\n})},\nupdateForce(){\n  let self = this\nfunction unique(arr) {\n    return arr.filter(function(item, index, arr) {\n      // 取出元素, 该元素在数组中第一次出现的索引 === 当前索引值\n      return arr.indexOf(item, 0) === index;\n    });\n}\nfunction countTimes(data) {\n    return data.reduce(function(time, name) {\n        if (name in time) {\n            time[name]++;\n        } else {\n            time[name] = 1;\n        }\n        return time;\n    }, {});\n}\n\nvar data_select = []\nvar data_select1 = []\nvar place_count = []\nfor(var i=0, len=this.data.length-1; i<len; i++){\n  var d = this.data[i]\n  data_select1.push(d.properties.name.toString())}\n  data_select = unique(data_select1)\n  place_count = countTimes(data_select1)\nvar max_count = 0\nfor(i in place_count){\n  var item = place_count[i];\n  if (item>max_count){\n    max_count = item\n  }\n}\n  var height2 = this.height2\n  var width2 = this.width2\n  var svg2 = this.svg2\nd3.json(\"sushi_map.json\", function(error, point) {\n  const places_all = topojson.feature(point, point.objects.places)\n\n  svg2.selectAll(\"*\").remove();\n  svg2.append('circle')\n    .attr('r', 5)\n    .attr('cx', width2 / 2)\n    .attr('cy', height2 / 2);\nvar nodes = []\nvar links=[]\n    for(var i=0, len=data_select.length;i<len;i++){\n        nodes.push({\"name\":data_select[i]})\n      }\n    for(i=1, len=places_all.features.length-1; i<len; i++){\n    // (note: loop until length - 1 since we're getting the next\n    //  item with i+1)\n    var place1 = places_all.features[i].properties.name.toString()\n    var place2 = places_all.features[i+1].properties.name.toString()\n    // if ((place1 in data)&&(place2 in data)){\n    var a = check_in(data_select, place1)\n    var b = check_in(data_select, place2)\n    if((a==\"TRUE\") && (b==\"TRUE\")){\n      var index1 = data_select.findIndex(check_equal1)\n      var index2 = data_select.findIndex(check_equal2)\n      links.push({\"source\": index1, \"target\": index2})\n    }}\nfunction check_in(data, place){\n  for(var i=0, len=places_all.features.length-1; i<len; i++){\n    var d = data[i]\n    if(d== place){\n      return 'TRUE'\n    }}\n  return 'False'\n}\n//var select_place_from_force = []\nvar linkElements = svg2.selectAll()\n        .data(links)\n        .enter()\n        .append('line')\n        .attr('stroke', 'black')\n        .attr('stroke-width', '2px');\nself.nodeElements = svg2.selectAll()\n        .data(nodes)\n        .enter()\n        .append('circle')\n        .attr('r', function(node){return 8*(place_count[node.name]+4)/(5+max_count)})\n        .attr('id', function(node){return node.name})\n        .attr('fill', '#6495ED')\n        .on('mouseover',function(){var that = this\n          d3.select(that).attr(\"fill\",'#BC8F8F')\n          self.GLOBAL.Log_file.push(['timestamp',new Date().getTime()/1000,'hover-force-position',d3.mouse(this),that.id,'\\n'])\n          /*\n          select_place_from_force.push(that.id)\n          console.log(select_place_from_force)\n          */\n          Bus.$emit(\"Force_select_data\", that.id)})\n        .on('mouseout', function(){return self.nodeElements.attr('fill', '#6495ED')})\n        .call(d3.drag()\n              .on('start', dragstarted)\n              .on('drag', dragged)\n              .on('end', dragended));\nvar textElements = svg2.selectAll()\n  .data(nodes)\n  .enter().append('text')\n    .text(node => node.name)\n    .attr('font-size', 10)\n    .attr('dx', 8)\n    .attr('dy', 4)\n\nconst simulation = d3.forceSimulation()\n          .force('link', d3.forceLink().distance(25))\n          .force('charge', d3.forceManyBody(-100))\n          .force('center', d3.forceCenter(width2 / 2, height2 / 2));\n\nsimulation\n    .nodes(nodes)\n    .on('tick', () => {\n  linkElements\n        .attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y)\n  self.nodeElements\n    .attr('cx', function(d){return d.x = Math.max(5,Math.min(280,d.x))})\n    .attr('cy', function(d){return d.y = Math.max(5,Math.min(290,d.y))})\n  textElements\n    .attr('x', node => node.x)\n    .attr('y', node => node.y)\n})\n\nsimulation\n    .force('link')\n    .links(links);\n\nfunction dragstarted(d) {\n    if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n}\n\nfunction dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n}\n\nfunction dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n}\nfunction check_equal1(place){return place.toString()==place1}\nfunction check_equal2(place){return place.toString()==place2}})\n},\nselect_new_point(){\n  var data = this.Hist_select_data\n  this.nodeElements.attr('fill',function(d){return isSelectedByHist(d,data)\nfunction isSelectedByHist(a,data){\n  for(var i=0,len=data.length;i<len;i++){\n    var place = data[i].properties.name\n      if(a.name==place){\n        return \"#BC8F8F\"}\n    }\n    return \"#6495ED\"\n  }\n})\n\n}\n}}\n</script>\n\n<style>\n\n.selected{\n  fill: yellow;\n}"]}]}